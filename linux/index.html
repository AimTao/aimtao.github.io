<!DOCTYPE html><html lang="en" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="manifest" href="/manifest.json"><link rel="apple-touch-icon" sizes="76x76" href="https://hutu0.aimtao.net/site/icon.webp"><link rel="icon" href="https://hutu0.aimtao.net/site/icon.webp"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#2f4154"><meta name="author" content="AimTao"><meta name="keywords" content="C++,Python,Go,算法，开发,blog,后端,记录"><meta name="description" content="Linux 系统使用入门，本文系统地记录常见命令、服务。"><title>学习笔记｜Linux 命令 - AimTao</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_2113603_2ltiep6fmf8.css"><link rel="stylesheet" href="https://gcore.jsdelivr.net/npm/lxgw-wenkai-webfont@1.7.0/lxgwwenkai-regular.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"www.aimtao.net",root:"/",version:"1.9.1",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:"❡"},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"sh"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h2,h3,h4",collapseDepth:2},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!0,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!1,baidu:"07fe5d228ae82eadee00480515f9d64b",google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:"hkFccy0TBvlTMrTD2n9MwSIx-gzGzoHsz",app_key:"yUJSgy6kcnRscdGX9ec7jlFz",server_url:"https://analytics.aimtao.net",path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><style type="text/css">.spoiler{display:inline}p.spoiler{display:flex}.spoiler a{pointer-events:none}.spoiler-blur,.spoiler-blur>*{transition:text-shadow .5s ease}.spoiler .spoiler-blur,.spoiler .spoiler-blur>*{color:transparent;background-color:rgba(0,0,0,0);text-shadow:0 0 10px grey;cursor:pointer}.spoiler .spoiler-blur:hover,.spoiler .spoiler-blur:hover>*{text-shadow:0 0 5px grey}.spoiler-box,.spoiler-box>*{transition:color .5s ease,background-color .5s ease}.spoiler .spoiler-box,.spoiler .spoiler-box>*{color:#000;background-color:#000;text-shadow:none}</style><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="AimTao" type="application/atom+xml">
</head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>AimTao&#39;s Blog</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> Home</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> Categories</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> Tags</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> About</a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-link-fill"></i> Links</a></li><li class="nav-item"><a class="nav-link" href="/atom.xml"><i class="iconfont icon-rss"></i> RSS</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-archive-fill"></i> Archives</a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/archives/">Timeline </a><a class="dropdown-item" href="/categories/Implement-From-Scratch/">Implement From Scratch </a><a class="dropdown-item" href="/tags/Kernel/">Linux kernel </a><a class="dropdown-item" href="/categories/Mark/">Mark</a></div></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(https://hutu.aimtao.net/web/2018-11-21-linux.webp-s) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="学习笔记｜Linux 命令"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2018-11-21 23:36" pubdate>2018-11-21 PM</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 23k words </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 18 mins</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">学习笔记｜Linux 命令</h1><p class="note note-info">本文最后更新于：5 years ago</p><div class="markdown-body"><blockquote><p>Linux 系统使用入门，本文系统地记录常见命令、服务。</p></blockquote><span id="more"></span><h2 id="零、背景">零、背景</h2><h3 id="1-Linux-和-windows-不同">1.Linux 和 windows 不同</h3><ol><li>linux严格区分大小写</li><li>所有内容以文件形式保存，包括硬件</li><li>没有任何扩展名区分文件类型<br><strong>压缩包</strong>： <code>.gz</code> <code>.bz2</code> <code>.tar.bz2</code> <code>.tg2</code><br><strong>二进制软件包</strong>： <code>.rpm</code><br><strong>网页文件</strong>： <code>.html</code> <code>.php</code><br><strong>脚本文件</strong>： <code>.sh</code><br><strong>配置文件</strong>： <code>.conf</code></li><li>Window 下程序不能直接在linux中安装和运行</li></ol><h3 id="2-字符界面的优势">2.字符界面的优势</h3><ol><li>占用资源少</li><li>减少出错、被攻击的可能性</li></ol><h2 id="一、命令基本格式">一、命令基本格式</h2><h3 id="1-登陆">1.登陆</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@localhost~]#<br></code></pre></td></tr></table></figure><ul><li><strong>root:</strong> 用户名</li><li><strong>localhost</strong>： 主机名</li><li><strong>～:</strong> 表示当前位置在 <code>~</code></li><li><strong>#:</strong> 表示当前用户是超级用户，普通用户是 $</li></ul><h3 id="2-格式">2.格式</h3><p><strong>命令 【选项】【参数】</strong></p><p>注意：</p><ol><li>个别命令使用不遵循格式</li><li>当有多个选项时，可以写在一起</li><li>简化选项与完整选项（-a 等于 -all）</li></ol><h3 id="3-命令类型">3.命令类型</h3><ul><li>文件处理命令</li><li>文件搜索命令</li><li>帮助命令</li><li>压缩和解压缩命令</li><li>关机和重启命令</li><li>其他常用命令</li></ul><h2 id="二、目录处理命令">二、目录处理命令</h2><h3 id="1-常用目录名">1.常用目录名</h3><table><thead><tr><th>系统目录结构</th><th>备注</th></tr></thead><tbody><tr><td><strong>/</strong></td><td>根目录</td></tr><tr><td><strong>/bin</strong></td><td>命令保存目录，Binary的缩写，存放普通用户可读取的命令，sbin存放超级用户能访问的命令</td></tr><tr><td><strong>/boot</strong></td><td>启动目录，保存着启动相关的文件</td></tr><tr><td><strong>/dev</strong></td><td>设备文件保存目录，Device(设备)的缩写，存放的是硬件、特殊命令</td></tr><tr><td><strong>/etc</strong></td><td>配置文件保存目录，存放所有的系统管理所需要的配置文件和子目录</td></tr><tr><td><strong>/home</strong></td><td>保存所有的用户主目录，一个用户一个目录</td></tr><tr><td><strong>/lib</strong></td><td>动态链接共享库保存目录，数据库</td></tr><tr><td><strong>/usr</strong></td><td>系统软件资源目录，Unix System Resources。<br><strong>/usr/bin</strong>：存放用户可执行的二进制文件<br><strong>/usr/sbin</strong>：存放系统管理员可执行的二进制文件<br>/usr/lib：存放共享库文件<br><strong>/usr/local</strong>：存放用户自己编译安装的软件。桌面快捷方式会出现在 /usr/local/share/applications。<br>/usr/share：存放共享数据，如帮助文档、图标等。</td></tr><tr><td><strong>/opt</strong></td><td>用于存放第三方厂商开发的程序，所以取名为option，意为&quot;选装&quot;。</td></tr><tr><td>/mnt</td><td>系统挂载目录。需要用户手动挂载</td></tr><tr><td>/media</td><td>用户临时挂载目录。系统可以识别设备并自动挂载</td></tr><tr><td>/sys</td><td>内存的挂载点，不能操作</td></tr><tr><td>/proc</td><td>虚拟目录，是系统内存的映射。该目录的内容不在硬盘上，而在内存中。我们可以访问该目录来获取系统信息</td></tr><tr><td>/tmp</td><td>临时目录</td></tr><tr><td>/var</td><td>系统相关文档内容</td></tr></tbody></table><p>PS: 为什么 / 和 /usr 下有相同的目录?</p><p>因为一开始使用一块盘，后来大小不够，加了一块盘，并挂载在 /usr 上。两块盘的目录结构完全相同，第一块盘的目录（/bin, /sbin, /lib, /tmp…）都在/usr目录下重新出现一次。</p><h3 id="2-文件的颜色">2.文件的颜色</h3><table><thead><tr><th>白色</th><th>普通文件</th></tr></thead><tbody><tr><td>蓝色</td><td>目录</td></tr><tr><td>绿色</td><td>可执行文件</td></tr><tr><td>红色</td><td>压缩文件</td></tr><tr><td>青色</td><td>链接文件</td></tr><tr><td>黄色</td><td>设备文件（block块、char字符、fifo管道）</td></tr><tr><td>灰色</td><td>其他文件</td></tr></tbody></table><h3 id="3-查询目录中的内容-ls">3.查询目录中的内容 ls</h3><blockquote><p>存放在 /bin/ls。</p></blockquote><p><strong>ls【选项】【文件或目录】</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">ls</span> -l /dev/<br></code></pre></td></tr></table></figure><table><thead><tr><th>选项</th><th>备注</th></tr></thead><tbody><tr><td>-a</td><td>显示所有文件、包括隐藏文件</td></tr><tr><td>-l</td><td>显示详细信息【 ls -l 简写成 ll 】</td></tr><tr><td>-d</td><td>查看目录属性</td></tr><tr><td>-h</td><td>人性化显示文件大小</td></tr><tr><td>-i</td><td>显示文件索引节点号（inode）</td></tr><tr><td>-t</td><td>按时间排序（最近时间在最上面）</td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">drwxr-xr-x   5 root1  root   160  9 19 17:10 java<br></code></pre></td></tr></table></figure><ul><li><strong>drwxr-xr-x</strong>：<code>d</code> <code>rwx</code> <code>r-x</code> <code>r-x</code><ul><li><code>d</code>：表类型，-是文件，d是目录，l是软连接文件，另外有：块设备文件（b）、字符设备文件（c）、套接字文件（s）、管道文件（p）</li><li><code>rwx</code>：前三个是 uers所有者</li><li><code>r-x</code>：中间三个是 group所属组</li><li><code>r-x</code>：后面三个是 other其他人</li><li>r是read，w是write，x是execute执行。</li></ul></li><li><strong>5</strong>：引用计数，默认是 1，创建一个硬链接，加 1。</li><li><strong>root1</strong>：所有者</li><li><strong>root</strong>：所属组</li><li><strong>160</strong>：字节大小</li><li><strong>9 19 17:10</strong> ：修改时间为9月18日 17:10</li><li><strong>java</strong>：文件名</li></ul><h3 id="4-建立目录-mkdir">4.建立目录 mkdir</h3><p><strong>mkdir【目录名】</strong>：make directories（目录）</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 创建一个叫 test 的目录</span><br><span class="hljs-built_in">mkdir</span> <span class="hljs-built_in">test</span><br><br><span class="hljs-comment"># 递归创建多层目录</span><br><span class="hljs-built_in">mkdir</span> -p test1/test2/test3<br><br><span class="hljs-comment"># 如果重名会报错。</span><br></code></pre></td></tr></table></figure><h3 id="5-切换所在目录-cd">5.切换所在目录 cd</h3><p><strong>cd【目录名】</strong></p><table><thead><tr><th>简化操作</th><th>备注</th></tr></thead><tbody><tr><td>cd ~</td><td>进入home目录</td></tr><tr><td>cd</td><td>进入home目录</td></tr><tr><td>cd -</td><td>进入<strong>上次</strong>目录</td></tr><tr><td>cd …</td><td>进入<strong>上级</strong>目录</td></tr><tr><td>.</td><td>表示<strong>当前</strong>目录</td></tr><tr><td><strong>相对路径</strong>：从当前目录开始</td><td></td></tr><tr><td><strong>绝对路径</strong>：从根目录开始</td><td></td></tr></tbody></table><h3 id="6-查询目录位置-pwd">6.查询目录位置 pwd</h3><p><strong>pwd</strong>：print working directory</p><h3 id="7-删除空目录-rmdir">7.删除空目录 rmdir</h3><p><strong>rmdir</strong>：remove empty directories<br>注：只能删除空目录，非空目录不能删除</p><h3 id="8-删除文件或目录-rm">8.删除文件或目录 rm</h3><p><strong>rm</strong>：remove</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 删除目录和目录中的文件</span><br><span class="hljs-built_in">rm</span> -r /temp<br><br><span class="hljs-comment"># 删除目录之前询问（加 -i）</span><br><span class="hljs-built_in">rm</span> -ri /temp<br><br><span class="hljs-comment"># 强制删除</span><br><span class="hljs-built_in">rm</span> -rf<br><br><span class="hljs-comment"># 删除temp目录下所有内容【加*】</span><br><span class="hljs-built_in">rm</span> -rf /temp/*<br><br><span class="hljs-comment"># 删除temp【不加*】</span><br><span class="hljs-built_in">rm</span> -rf /temp/<br></code></pre></td></tr></table></figure><h3 id="9-显示目录结构-tree">9.显示目录结构 tree</h3><p>查看当前目录的一级目录结构：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">tree . -L 1<br></code></pre></td></tr></table></figure><p>打印完整路径，便于查找：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">tree -f<br></code></pre></td></tr></table></figure><h2 id="三、文件处理命令">三、文件处理命令</h2><h3 id="1-复制命令-cp">1.复制命令 cp</h3><p><strong>cp【选项】【原文件名或目录名】【目标目录】</strong>：copy</p><table><thead><tr><th>选项</th><th>备注</th></tr></thead><tbody><tr><td>-r</td><td>递归复制，复制目录，不加 -r 复制文件</td></tr><tr><td>-p</td><td>连带文件属性复制</td></tr><tr><td>-d</td><td>若源文件是链接文件，则复制链接属性</td></tr><tr><td>-a</td><td>相当于 -pdr 【所有都一样，包括时间】</td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 复制aaa.cfg并改名成bbb.cfg</span><br><span class="hljs-built_in">cp</span> aaa.cfg /tmp/bbb.cfg<br><br><span class="hljs-comment"># 仅复制</span><br><span class="hljs-built_in">cp</span> aaa.cfg /tmp/<br></code></pre></td></tr></table></figure><p><strong>注意：拷贝文件时，</strong></p><ul><li>如果存在 2.txt，则覆盖 2.txt 的内容；</li><li>如果不存在 2.txt，拷贝并命名为 2.txt。</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">cp</span> 1.txt 2.txt<br></code></pre></td></tr></table></figure><p>注意：拷贝目录时，</p><ul><li>如果存在 tmp，则将 my_dir 拷贝一份，并放入 tmp 文件夹中；</li><li>如果不存在 tmp，则将 my_dir 拷贝一份，并命名为 tmp。</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">cp</span> -r my_dir tmp<br></code></pre></td></tr></table></figure><h3 id="2-剪切命令-mv">2.剪切命令 mv</h3><p><strong>mv【源文件或目录】【目标目录】</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 将japan/剪切到/tmp目录下</span><br><span class="hljs-built_in">mv</span> japan/ /tmp/<br><br><span class="hljs-comment"># 将japan/剪切到/tmp/目录下，并改名为japan01</span><br><span class="hljs-built_in">mv</span> japan/ /tmp/japan01<br><br><span class="hljs-comment"># 改名</span><br><span class="hljs-built_in">mv</span> aaa.cfg bbb.cfg<br></code></pre></td></tr></table></figure><h3 id="3-创建文件-touch">3.创建文件 touch</h3><ul><li>如果文件存在，修改文件修改时间。（不报错）</li><li>如果文件不存在，创建文件。</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">touch</span> 1.txt<br></code></pre></td></tr></table></figure><h3 id="4-查看文件-cat">4.查看文件 cat</h3><p>当文件过长，在终端上无法全部显示。（因为终端上不能往上翻。）</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">cat</span> small_file<br></code></pre></td></tr></table></figure><p>PS: 使用 <code>cat *</code> 查看当前目录的所有文件内容时，无法分清是哪个文件的内容。使用以下命令即可在文件内容前，显示文件名。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> *; <span class="hljs-keyword">do</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;\n====filename: <span class="hljs-variable">$file</span>&quot;</span>; <span class="hljs-built_in">cat</span> <span class="hljs-variable">$file</span>; <span class="hljs-keyword">done</span>; <br></code></pre></td></tr></table></figure><h3 id="5-查看文件-more">5.查看文件 more</h3><ul><li>回车键：往下翻一行</li><li>空格键：往下翻一页</li><li>q键：退出</li></ul><p>缺点：翻完不能返回上面。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">more big_file<br></code></pre></td></tr></table></figure><h3 id="6-查看文件-less">6.查看文件 less</h3><ul><li>回车键（ctrl + n）（↓）：往下翻一行</li><li>ctrl + p （↑）：往上翻一行</li><li>空格键（ctrl + f）：往下翻一页</li><li>ctrl + b：往上翻一页</li><li>q键：退出</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">less big_file<br></code></pre></td></tr></table></figure><h3 id="7-文件前几行-head">7.文件前几行 head</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 默认显示文件前十行的内容</span><br><span class="hljs-built_in">head</span> big_file<br><br><span class="hljs-comment"># 加参数，自定义显示行数</span><br><span class="hljs-built_in">head</span> -5 big_file<br></code></pre></td></tr></table></figure><h3 id="8-文件后几行-tail">8.文件后几行 tail</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 默认显示文件后十行的内容</span><br><span class="hljs-built_in">tail</span> big_file<br><br><span class="hljs-comment"># 加参数，自定义显示行数</span><br><span class="hljs-built_in">tail</span> -5 big_file<br></code></pre></td></tr></table></figure><h3 id="9-统计命令-wc">9.统计命令 wc</h3><ul><li>统计输入的行数、单词数、字符数。</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">wc</span><br><span class="hljs-comment"># 输入待统计的文本，并按 ctrl + d 统计</span><br></code></pre></td></tr></table></figure><ul><li>统计文件的行数、单词数、字符数。</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">wc</span> hello.cc<br></code></pre></td></tr></table></figure><ul><li><strong>好用！</strong></li></ul><p>wc 执行 `` 中的内容。【不是单引号！是 反撇！】</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">wc</span> `find /Users/nice/Documents/test_source /Users/nice/algorithm-training -name <span class="hljs-string">&#x27;*.c&#x27;</span> -o -name <span class="hljs-string">&#x27;*.cc&#x27;</span>`<br></code></pre></td></tr></table></figure><h3 id="10-查看二进制文件-od">10.查看二进制文件 od</h3><p><code>-t</code>：指定数据的显示格式。</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>c</td><td>ASCII字符</td></tr><tr><td>d</td><td>有符号的十进制数</td></tr><tr><td>f</td><td>浮点数</td></tr><tr><td>o</td><td>八进制数</td></tr><tr><td>u</td><td>无符号十进制数</td></tr><tr><td>x</td><td>十六进制</td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">od</span> -tx app<br></code></pre></td></tr></table></figure><h3 id="11-查看目录大小-du">11.查看目录大小 du</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 查看当前目录下的所有目录的大小</span><br><span class="hljs-built_in">du</span><br><br><span class="hljs-comment"># 查看目录 my_dir 的大小</span><br><span class="hljs-built_in">du</span> my_dir -h<br></code></pre></td></tr></table></figure><p><code>-h</code>：human-readable，print sizes in human readable format (e.g., 1K 234M 2G)</p><h3 id="12-查看磁盘使用情况-df">12.查看磁盘使用情况 df</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">df</span> -h<br></code></pre></td></tr></table></figure><h3 id="13-修改文件权限-chmod">13.修改文件权限 chmod</h3><blockquote><p><code>chmod</code>：change file modes or Access Control Lists。</p></blockquote><ul><li><strong>chmod 【who】【+｜-｜=】【mode】 【文件名】</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 给所有人增加执行权限</span><br><span class="hljs-built_in">chmod</span> a+x app<br><span class="hljs-built_in">chmod</span> +x app.  <span class="hljs-comment"># 不指定who，就是所有人</span><br><br><span class="hljs-comment"># 给其他人减少读权限</span><br><span class="hljs-built_in">chmod</span> o-r my_txt<br><br><span class="hljs-comment"># 覆盖所有人的权限，为只读</span><br><span class="hljs-built_in">chmod</span> a=r my_txt<br></code></pre></td></tr></table></figure><table><thead><tr><th>who</th><th>含义</th></tr></thead><tbody><tr><td>a</td><td>所有人</td></tr><tr><td>u</td><td>文件所有者</td></tr><tr><td>g</td><td>文件所属组</td></tr><tr><td>o</td><td>其他人</td></tr></tbody></table><ul><li><strong>chmod 【+｜-｜空】【数字】 【文件名】</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 覆盖式更改所有人的权限</span><br><span class="hljs-built_in">chmod</span> 765 my_txt<br><span class="hljs-comment"># 7-- rwx --文件所有者</span><br><span class="hljs-comment"># 6-- rw  --文件所属组</span><br><span class="hljs-comment"># 5-- rx  --其他人</span><br><br><span class="hljs-comment"># 给 其他人 减少执行权限</span><br><span class="hljs-built_in">chmod</span> -001 my_txt<br><br><span class="hljs-comment"># 给 所有人 减少执行权限</span><br><span class="hljs-built_in">chmod</span> -1 my_txt<br></code></pre></td></tr></table></figure><table><thead><tr><th>数字</th><th>权限</th></tr></thead><tbody><tr><td>4</td><td>r</td></tr><tr><td>2</td><td>w</td></tr><tr><td>1</td><td>x</td></tr></tbody></table><p><strong>PS：目录必须有执行权限，不然打不开。</strong></p><h3 id="14-修改文件所有者和所属组-chown、chgrp">14.修改文件所有者和所属组 chown、chgrp</h3><blockquote><p><code>chown</code>： - change file owner and group</p><p><code>chgrp</code>： - change group ownership</p><p>文件所有者不一定在文件所属组中。</p></blockquote><ul><li><strong>chown 【新的所有者】 【文件名】</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 将 my_txt 的文件所有者更改为 new_user</span><br><span class="hljs-built_in">chown</span> new_user my_txt<br></code></pre></td></tr></table></figure><ul><li><strong>chown 【新的所有者】:【新的所属组】 【文件名】</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 将 my_txt 的文件所有者更改为 new_user，文件所属组更改为 new_group</span><br><span class="hljs-built_in">chown</span> new_user:new_group my_txt<br></code></pre></td></tr></table></figure><ul><li><strong>chgrp 【新的所属组】 【文件名】</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">chgrp</span> new_group my_txt<br></code></pre></td></tr></table></figure><h2 id="四、链接命令">四、链接命令</h2><p><strong>ln【选项】【源文件】【目标文件】</strong></p><table><thead><tr><th>命令</th><th>备注</th></tr></thead><tbody><tr><td>ln</td><td>创建硬链接</td></tr><tr><td>ln -s</td><td>创建软链接</td></tr></tbody></table><ul><li><strong>硬链接特点</strong></li></ul><p>相当于备份功能，源文件和硬连接文件都指向内存上的同一个储存块。<br>当源文件被删，硬链接文件依然可以访问内存上的储存块。<br>当源文件和所有硬链接文件都被删除，这块内存才会被释放。</p><ol><li>拥有相同的 i节点和储存block块，可以看成是同一个文件。</li><li>只能通过 i节点识别。</li><li>不能跨分区。</li><li>不能针对目录使用。</li></ol><ul><li><strong>软链接特点</strong></li></ul><ol><li>类似windows快捷方式，源文件删除，软链接文件无法访问。</li><li>软链接拥有自己的 i节点和block块，数据块存的是原文件的 i节点。</li><li>软链接权限由原链接控制它。</li><li>创建软连接时，要使用源文件的绝对路径，否则移动软连接，将找不到文件。<br>PS：软链接文件的大小为 源文件的路径 的整个字符串的字节大小。</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">ln</span> -s /home/my my_link<br><span class="hljs-comment"># 则 my_link 的文件大小为 8</span><br></code></pre></td></tr></table></figure><h2 id="五、搜索命令">五、搜索命令</h2><h3 id="1-文件搜索命令-locate">1.文件搜索命令 locate</h3><p><strong>locate 【文件名】</strong></p><blockquote><p>在后台数据库中按文件名搜索，搜索速度更快（数据库不实时更新，一天更新一次）。</p><p><code>/var/lib/mlocate/mlocate.db</code> 是 locate 命令搜索的数据库。（也可能是 slocate.db，不同版本不同。）</p></blockquote><p>命令需要安装并更新数据库 mlocate.db：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">yum install mlocate  <span class="hljs-comment"># 注意是 mlocate</span><br>updatedb<br></code></pre></td></tr></table></figure><p>使用：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 查找 hello.cc 文件</span><br>lacate hello.cc<br>updatadb    <span class="hljs-comment"># 强制更新命令。比如新创建的文件需要更新后才能搜索到。</span><br></code></pre></td></tr></table></figure><p>配置文件 <code>\etc\update.conf</code> （解决问题：为什么不搜索 /tmp 目录？）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 是否开启搜索限制</span><br><br>PRUNE_BIND_MOUNTS = <span class="hljs-string">&quot;yes&quot;</span><br><br><span class="hljs-comment"># 搜索时，不搜索文件系统</span><br>PRUNEFS = <span class="hljs-string">&quot;9p afs anon_inodefs auto autofs bdev binfmt_misc cgroup cifs coda configfs cpuset debugfs devpts ecryptfs exofs fuse fuse.sshfs fusectl gfs gfs2 gpfs hugetlbfs inotifyfs iso9660 jffs2 lustre mqueue ncpfs nfs nfs4 nfsd pipefs proc ramfs rootfs rpc_pipefs securityfs selinuxfs sfs sockfs sysfs tmpfs ubifs udf usbfs fuse.glusterfs ceph fuse.ceph&quot;</span><br><br><span class="hljs-comment"># 搜索时，不搜素文件类型</span><br>PRUNENAMES = <span class="hljs-string">&quot;.git .hg .svn&quot;</span><br><br><span class="hljs-comment"># 搜索时，不搜索的路径</span><br>PRUNEPATHS = <span class="hljs-string">&quot;/afs /media /mnt /net /sfs /tmp /udev /var/cache/ccache /var/lib/yum/yumdb /var/spool/cups /var/spool/squid /var/tmp /var/lib/ceph&quot;</span><br></code></pre></td></tr></table></figure><h3 id="2-命令搜索命令-whereis、which">2.命令搜索命令 whereis、which</h3><blockquote><p><code>which</code> 可以查找别名，<code>whereis</code> 不可以。</p></blockquote><p><strong>（1）whereis 【命令名】</strong></p><p>搜素命令所在路径、及帮助文档所在的位置。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 查找 nginx 命令的路径。</span><br>whereis nginx<br></code></pre></td></tr></table></figure><table><thead><tr><th>选项</th><th>备注</th></tr></thead><tbody><tr><td>-b</td><td>只查找可执行命令</td></tr><tr><td>-m</td><td>只查找帮助文件</td></tr></tbody></table><p><strong>（2）which 【命令名】</strong></p><p>查找命令所在路径、及别名。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 查找 ls 命令，会显示别名。</span><br>[root@localhost /]# <span class="hljs-built_in">which</span> <span class="hljs-built_in">ls</span><br><span class="hljs-built_in">alias</span> <span class="hljs-built_in">ls</span>=<span class="hljs-string">&#x27;ls --color=auto&#x27;</span><br>    /usr/bin/ls<br></code></pre></td></tr></table></figure><p><strong>（3）$PATH</strong></p><p><code>whereis</code>、<code>which</code> 命令在环境变量 <code>$PATH</code> 中搜索。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 查看当前的环境变量，由冒号分割。</span><br>[root@localhost etc]# <span class="hljs-built_in">echo</span> <span class="hljs-variable">$PATH</span><br>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin<br></code></pre></td></tr></table></figure><h3 id="3-文件搜索命令-find">3.文件搜索命令 find</h3><blockquote><p>避免大范围搜索，会非常耗费系统资源。若负载过大，容易宕机。</p></blockquote><p><strong>（1）find 【搜索范围】【搜索条件】</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 在 / 目录下，寻找名称为 install.log 的文件。</span><br>find / -name <span class="hljs-string">&quot;install.log&quot;</span><br><br><span class="hljs-comment"># 在 / 目录下，寻找名称为 install.lo? 的文件。? 代表该字符不确定，可能是 g，可能是 k。</span><br>find / -name <span class="hljs-string">&quot;install.log[gk]&quot;</span><br><br><span class="hljs-comment"># 在 / 目录下，寻找所有者为 root 的文件</span><br>find / -user root<br></code></pre></td></tr></table></figure><table><thead><tr><th>通配符</th><th>备注</th></tr></thead><tbody><tr><td>*</td><td>匹配任意内容</td></tr><tr><td>?</td><td>匹配任意一个字符</td></tr><tr><td>[]</td><td>匹配任意一个中括号内的字符</td></tr></tbody></table><table><thead><tr><th>搜索条件</th><th>备注</th></tr></thead><tbody><tr><td>-name</td><td>名称</td></tr><tr><td>-iname</td><td>名称（不区分大小写）</td></tr><tr><td>-user</td><td>所有者</td></tr><tr><td>-nouser</td><td>没有所有者 —&gt; 垃圾文件</td></tr></tbody></table><p><strong>（2）find 【搜索范围】【时间】</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 查找 10天 前修改的日志文件。</span><br>find /var/log/ -mtime +10<br></code></pre></td></tr></table></figure><table><thead><tr><th>时间选项</th><th>备注</th></tr></thead><tbody><tr><td>-10</td><td>10内的修改文件</td></tr><tr><td>10</td><td>10天当天修改文件</td></tr><tr><td>+10</td><td>10天前修改文件</td></tr></tbody></table><table><thead><tr><th>搜索条件</th><th>备注</th></tr></thead><tbody><tr><td>-atime</td><td>文件访问时间</td></tr><tr><td>-ctime</td><td>改变文件属性的时间</td></tr><tr><td>-mtime</td><td>修改文件内容的时间</td></tr></tbody></table><p><strong>（3）find 【搜索范围】【大小】</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 查找当前目录下，文件大小 小于 25KB 的文件。</span><br>find . -size -25k<br></code></pre></td></tr></table></figure><table><thead><tr><th>大小（不可以是小数）（小k 和 大M）</th><th>备注</th></tr></thead><tbody><tr><td>-2k</td><td>&lt; 2k 的文件</td></tr><tr><td>2k</td><td>== 2k 的文件</td></tr><tr><td>+2k</td><td>&gt; 2k 的文件</td></tr><tr><td>-20M</td><td>&lt; 20M 的文件</td></tr></tbody></table><p><strong>（4）find 【搜索范围】【 i 节点】</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 查找 / 目录下 i 节点是 262422 的文件。</span><br>find / -inum 262422<br></code></pre></td></tr></table></figure><p><strong>（5）find【搜索范围】【多个条件】</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 查找 /etc 目录下，大于 20k 小于 50k 的文件。</span><br>find /etc -size +20k -a -size -50k<br></code></pre></td></tr></table></figure><table><thead><tr><th>逻辑</th><th>备注</th></tr></thead><tbody><tr><td>-a</td><td>与and</td></tr><tr><td>-o</td><td>或or</td></tr></tbody></table><p><strong>（6）find 【搜索范围】【条件】-exec 【命令2】{} ;</strong></p><blockquote><p>把搜索到的结果，交给 命令2 执行。</p></blockquote><p>⚠️注意：{} 和 \ 之间有空格；结尾有分号。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 查找 &lt;10k 的文件，并用 ls -lah 命令显示详细信息。 </span><br>find . -size -10k -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">ls</span> -lah &#123;&#125; \;<br></code></pre></td></tr></table></figure><p><strong>（7）find 【搜索范围】 【文件类型】</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 搜索当前文件下的普通文件</span><br>find . -<span class="hljs-built_in">type</span> f<br></code></pre></td></tr></table></figure><table><thead><tr><th>搜索条件</th><th>含义</th></tr></thead><tbody><tr><td>-type</td><td>类型</td></tr></tbody></table><table><thead><tr><th>字母</th><th>含义</th></tr></thead><tbody><tr><td>f</td><td>文件</td></tr><tr><td>d</td><td>目录</td></tr><tr><td>l</td><td>软连接文件</td></tr><tr><td>b</td><td>块设备文件</td></tr><tr><td>c</td><td>字符设备文件</td></tr><tr><td>s</td><td>套接字文件</td></tr><tr><td>p</td><td>管道文件</td></tr></tbody></table><h3 id="4-字符串搜索命令-grep">4.字符串搜索命令 grep</h3><blockquote><p>在文件中匹配符合条件的字符串。</p></blockquote><p><strong>grep 【选项】字符串 文件名</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 查找 spin_lock.cc 文件中的包含 字符串“#include” 的行。</span><br>grep <span class="hljs-string">&quot;#include&quot;</span> spin_lock.cc <br><br><span class="hljs-comment"># 结果如下：</span><br><span class="hljs-comment">#include &lt;stdio.h&gt;</span><br><span class="hljs-comment">#include &lt;stdlib.h&gt;</span><br><span class="hljs-comment">#include &lt;unistd.h&gt;</span><br><span class="hljs-comment">#include &lt;pthread.h&gt;</span><br></code></pre></td></tr></table></figure><table><thead><tr><th>选项</th><th>备注</th></tr></thead><tbody><tr><td>-i</td><td>忽略大小写</td></tr><tr><td>-v</td><td>排除指定字符</td></tr><tr><td>-n</td><td>显示原文中的行数</td></tr><tr><td>-H</td><td>搜索结果前打印文件名</td></tr><tr><td>-h</td><td>搜索结果前不打印文件名</td></tr></tbody></table><ul><li>在多个文件中查找</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">grep <span class="hljs-string">&quot;#include&quot;</span> 1.cc 2.cc 3.cc<br><br><span class="hljs-comment"># 上面方式搜索，会默认显示搜索结果出自于哪个文件，如：</span><br><span class="hljs-comment"># 1.cc: #include&lt;iostream&gt;</span><br><span class="hljs-comment"># 2.cc: #include&lt;string&gt;</span><br><br><span class="hljs-comment"># 使用 -h 可以不显示文件名。</span><br>grep -h <span class="hljs-string">&quot;#include&quot;</span> *     <span class="hljs-comment"># 在所有文件中，搜索 #include，并不显示结果出自哪个文件。</span><br></code></pre></td></tr></table></figure><ul><li><code>-v</code> 排除指定字符</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">grep -v <span class="hljs-string">&quot;#include&quot;</span> 1.cc  <span class="hljs-comment"># 除了出现过 #include 的行，其他的行都打印。</span><br></code></pre></td></tr></table></figure><p>PS：待搜索的内容中包含特殊字符，需要转义。</p><p>除了上述搜索文件的方式还可以使用管道。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">ps -aux | grep <span class="hljs-string">&quot;nginx&quot;</span> | grep -v <span class="hljs-string">&quot;grep&quot;</span>  <span class="hljs-comment"># 找到 nginx 相关的线程，并不显示 grep 的相关线程。</span><br></code></pre></td></tr></table></figure><p>有关 grep 和正则表达的应用，可以跳转 <a href="https://www.aimtao.net/linux-shell/#18-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F">shell 的正则表达式部分</a>。</p><h2 id="六、帮助命令">六、帮助命令</h2><h3 id="1-man">1.man</h3><blockquote><p>manual</p><p>获取指令命令的帮助</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">man <span class="hljs-built_in">ls</span><br></code></pre></td></tr></table></figure><ul><li><code>/-d</code> 定位到选项为 -d 的位置。</li><li><code>n</code> 向下翻。</li><li>man 的级别 1～9。</li></ul><table><thead><tr><th>级别</th><th>内容</th></tr></thead><tbody><tr><td>1</td><td>查看命令的帮助</td></tr><tr><td>2</td><td>查看别内核调用的函数的帮助</td></tr><tr><td>3</td><td>查看函数和函数库的帮助</td></tr><tr><td>4</td><td>查看特殊文件的帮助</td></tr><tr><td>5</td><td>查看配置文件的帮助</td></tr><tr><td>6</td><td>查看游戏的帮助</td></tr><tr><td>7</td><td>查看其他杂项的帮助</td></tr><tr><td>8</td><td>查看系统管理员可用命令的帮助</td></tr><tr><td>9</td><td>查看内核相关文件的帮助</td></tr></tbody></table><h3 id="2-help">2.help</h3><ul><li>【外部命令】–help</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">ls</span> --<span class="hljs-built_in">help</span><br></code></pre></td></tr></table></figure><ul><li>help 【内部命令】</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">help</span> <span class="hljs-built_in">cd</span><br></code></pre></td></tr></table></figure><p><strong>PS：如何判断是否是 shell 的内部命令？</strong></p><ul><li>tpye 查看命令是内部命令还是外部命令</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">type</span> <span class="hljs-built_in">ls</span><br></code></pre></td></tr></table></figure><h3 id="3-info"><a target="_blank" rel="noopener" href="http://3.info">3.info</a></h3><blockquote><p>超详细的帮助文档</p></blockquote><table><thead><tr><th>选项</th><th>备注</th></tr></thead><tbody><tr><td>-回车</td><td>进入子帮助页面（带*号标记）</td></tr><tr><td>-u</td><td>进入上一层页面</td></tr><tr><td>-n</td><td>进入下一个帮助小节</td></tr><tr><td>-p</td><td>进入上一个帮助小节</td></tr><tr><td>-q</td><td>退出</td></tr></tbody></table><h2 id="七、压缩与解压缩命令">七、压缩与解压缩命令</h2><blockquote><p>常用的压缩格式：zip、gz、bz2、tar.gz、tar.bz2。</p></blockquote><p>总结表：<br><strong>zip</strong></p><blockquote><p>.zip</p></blockquote><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-r</td><td>压缩目录</td></tr><tr><td>-d</td><td>指定压缩位置</td></tr></tbody></table><p><strong>gzip</strong></p><blockquote><p>.gz</p></blockquote><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-r</td><td>压缩目录下的文件</td></tr><tr><td>-c</td><td>将源文件写入压缩包，保留源文件</td></tr><tr><td>-d</td><td>解压缩</td></tr></tbody></table><p><strong>bzip2</strong></p><blockquote><p>.bz2</p></blockquote><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-k</td><td>压缩之后，保留源文件</td></tr><tr><td>-d</td><td>解压缩</td></tr></tbody></table><p><strong>tar</strong></p><blockquote><p>.tar、.tar.gz、.tar.bz2</p></blockquote><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-c（小写）</td><td>压缩</td></tr><tr><td>-C（大写）</td><td>指定解压缩位置</td></tr><tr><td>-v</td><td>显示过程</td></tr><tr><td>-f</td><td>指定压缩文件</td></tr><tr><td>-x</td><td>解压缩</td></tr><tr><td>-t</td><td>只查看内容，不解压</td></tr><tr><td>无选项</td><td>压缩成 .tar 格式</td></tr><tr><td>-z</td><td>压缩成 .tar.gz 格式</td></tr><tr><td>-j</td><td>压缩成 .tar.bz2 格式</td></tr></tbody></table><h3 id="1-zip">1.zip</h3><p><strong>（1）zip 【压缩后文件名】【源文件】</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">zip 001.zip 001<br></code></pre></td></tr></table></figure><p><strong>（2）zip -r 【压缩后的文件名】【源目录】</strong></p><p><strong>（3）unzip 【压缩文件】</strong></p><blockquote><p>解压缩。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">unzip 001.zip<br></code></pre></td></tr></table></figure><p><strong>（4）unzip -d 【解压缩的路径】 【压缩文件】</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">unzip -d /my_dir 001.zip <br></code></pre></td></tr></table></figure><h3 id="2-gzip">2.gzip</h3><p><strong>（1）gzip 【源文件】</strong></p><blockquote><p>压缩为 .gz 格式的文件，源文件消失。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">gzip 001.txt<br></code></pre></td></tr></table></figure><p><strong>（2）gzip -c 【源文件】&gt; 【压缩文件】</strong></p><blockquote><p>压缩为 .gz 格式的文件，源文件保留。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">gzip -c 001.txt &gt; 001.gz<br></code></pre></td></tr></table></figure><p><strong>说明</strong>：</p><p><code>-c</code>：是将文件打印出来。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">-c abc &gt; abc.gz<br><span class="hljs-comment"># 是将打印出来的内容，写入 abc.gz 的压缩包</span><br></code></pre></td></tr></table></figure><p><strong>（3）gzip -r 【源目录】</strong></p><blockquote><p>压缩目录下所有文件，不压缩目录。</p></blockquote><p><strong>（4）gzip -d 【压缩文件】</strong></p><blockquote><p>解压缩文件，不保留源文件。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">gzip -d abc.gz<br></code></pre></td></tr></table></figure><p><strong>（5）gunzip -d 【压缩文件】</strong></p><blockquote><p>解压缩文件，不保留源文件。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 加不加 -d 均可解压缩。</span><br>gunzip abc.gz<br>gunzip -d abc.gz<br></code></pre></td></tr></table></figure><p><strong>（6）gunzip -r 【含有 .gz压缩文件 的目录】</strong></p><blockquote><p>解压缩 abc 目录中的压缩文件，不保留源文件。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">gunzip -r abc<br></code></pre></td></tr></table></figure><h3 id="3-bzip2">3.bzip2</h3><p><strong>（1）bzip2 【源文件】</strong></p><blockquote><p>压缩为 .bz2 格式文件，不保留源文件。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">bzip2 abc<br></code></pre></td></tr></table></figure><p><strong>（2）bzip2 -k 【源文件】</strong></p><blockquote><p>压缩为 .bz2 格式文件，保留源文件。</p><p>k：keep</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">bzip2 -k abc<br></code></pre></td></tr></table></figure><p><strong>（3）bzip2 -d 【压缩文件】</strong></p><blockquote><p>解压缩，-k保留源压缩文件。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">bzip2 -d abc.bz2<br><span class="hljs-comment"># -k 保留源压缩文件</span><br>bzip2 -d -k abc.bz2<br></code></pre></td></tr></table></figure><p><strong>（4）bunzip2 【压缩文件】</strong></p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">bunzip2 </span>abc.<span class="hljs-keyword">bz2</span><br></code></pre></td></tr></table></figure><h3 id="4-tar">4.tar</h3><p><strong>（1）tar -cvf 【打包后的文件名】 【源文件】</strong></p><blockquote><p>压缩为 .tar 格式的文件，源文件保留。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">tar -cvf abc.tar abc<br></code></pre></td></tr></table></figure><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-c（小写）</td><td>创建（打包）</td></tr><tr><td>-v</td><td>显示提示信息</td></tr><tr><td>-f</td><td>指定打包后的文件名</td></tr></tbody></table><p><strong>（2）tar -xvf 【压缩文件】-C /tmp/</strong></p><blockquote><p>解压缩，源压缩文件保留。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 解压 abc.tar 到 /tmp/ 目录下。</span><br>tar -xvf abc.tar -C /tmp/<br></code></pre></td></tr></table></figure><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-x</td><td>释放（解打包）</td></tr><tr><td>-C（大写）</td><td>指定解压缩的位置</td></tr></tbody></table><p><strong>（3）tar -zcvf 【打包后的文件名】 【源文件】</strong></p><blockquote><p>压缩为 .tar.gz 格式的文件，源文件保留。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">tar -zcvf abc.tar.gz abc<br></code></pre></td></tr></table></figure><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-z</td><td>压缩成 .tar.gz 格式</td></tr></tbody></table><p><strong>（4）tar -zxvf 【压缩文件】</strong></p><blockquote><p>解压缩，源压缩文件保留。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">tar -zxvf abc.tar.gz<br></code></pre></td></tr></table></figure><p><strong>（5）tar -jcvf 【打包后的文件名】 【源文件】</strong></p><blockquote><p>压缩为 .tar.bz2 格式的文件，源文件保留。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">tar -jcvf abc.tar.bz2 abc<br></code></pre></td></tr></table></figure><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-j</td><td>压缩成 .tar.bz2 格式</td></tr></tbody></table><p><strong>（6）tar -jxvf 【压缩文件】</strong></p><blockquote><p>解压缩，源压缩文件保留。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">tar -jxvf abc.tar.bz2<br></code></pre></td></tr></table></figure><p><strong>（7）tar -jcvf 【打包后的文件名（绝对路径）】【源文件1】【源文件2】</strong></p><blockquote><p>打包 <strong>多个文件</strong> 到 <strong>指定位置的压缩包</strong> 中。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">tar -jcvf /tmp/abc.tar.bz2 abc_1 abc_2<br></code></pre></td></tr></table></figure><p><strong>（8）tar -jtvf 【源压缩文件】</strong></p><blockquote><p>只查看压缩包内容，不解压缩。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">tar -jtvf abc.tar.bz2<br></code></pre></td></tr></table></figure><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-t</td><td>只查看压缩包内容，不解压缩。</td></tr></tbody></table><h2 id="八、停止、关机、重启">八、停止、关机、重启</h2><p>停止机器：停止所有的 CPU 功能，但是仍然保持通电，使系统处于底层维护状态。</p><p>关闭机器：关闭电源。</p><h3 id="1-shoudown">1.shoudown</h3><p><strong>shoudown 【选项】时间</strong></p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-c</td><td>取消前一个关机/重启命令</td></tr><tr><td>-h</td><td>关机</td></tr><tr><td>-r</td><td>重启</td></tr><tr><td>-H</td><td>停止机器</td></tr><tr><td>-p</td><td>关闭机器</td></tr></tbody></table><p><strong>PS：如果使用了时间参数，系统关机前 5 分钟，会创建 <code>/run/nologin</code> 文件。以确保没有人可以再登录。</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 立即重启</span><br>shutdown -r now<br><br><span class="hljs-comment"># 一分钟后重启</span><br>shutdown -r<br><br><span class="hljs-comment"># 一分钟后关机</span><br>shutdown -h<br><br><span class="hljs-comment"># 05:30 自动重启</span><br>shutdown -r 05:30<br><br><span class="hljs-comment"># 05:30 自动重启, 加 &amp; 表示后台运行</span><br>shutdown -r 05:30 &amp;<br><br><span class="hljs-comment"># 取消前一个关机/重启命令</span><br>shutdown -c<br><br><span class="hljs-comment"># 停止机器</span><br>shutdown -H now<br></code></pre></td></tr></table></figure><h3 id="2-poweroff">2.poweroff</h3><p>会发送一个 ACPI 信号来通知系统关机（关闭电源）。</p><p>ACPI：Advanced Configuration and Power Management Interface</p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>–halt</td><td>停止机器</td></tr><tr><td>–reboot</td><td>关机</td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 立即关机，关闭电源</span><br>poweroff<br><br><span class="hljs-comment"># 停止机器</span><br>poweroff --halt<br><br><span class="hljs-comment"># 重启机器</span><br>poweroff --reboot<br></code></pre></td></tr></table></figure><h3 id="3-halt">3.halt</h3><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-p</td><td>关机</td></tr><tr><td>–reboot</td><td>重启</td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 立即关机</span><br>halt -p<br><br><span class="hljs-comment"># 停止机器</span><br>halt<br><br><span class="hljs-comment">#重启</span><br>halt --reboot<br></code></pre></td></tr></table></figure><h3 id="4-init0">4.init0</h3><p>init进程，它是一个由内核启动的用户级进程。</p><p>init 命令在 sbin 目录下。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 立即关机</span><br>init 0<br><br><span class="hljs-comment"># 重启</span><br>init 6<br></code></pre></td></tr></table></figure><blockquote><p>Linux 操作系统自从开始启动至启动完毕需要经历几个不同的阶段，这几个阶段就叫做 runlevel。</p><p>runlevel 可以认为是系统状态，进入每个 runlevel 都需要启动或关闭相应的一系列服务（services），这些服务（services）以初始化脚本的方式放置于目录<code>/etc/rc.d/rc?.d/</code>或者<code>/etc/rc?.d</code>下面（?代表runlevel的对应序号）。</p></blockquote><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>0</td><td>关机</td></tr><tr><td>1</td><td>单用户，有且仅有一个 root 用户登陆。</td></tr><tr><td>2</td><td>不完全多用户，不能使用NFS(Net File System)</td></tr><tr><td>3</td><td>完全多用户</td></tr><tr><td>4</td><td>未分配</td></tr><tr><td>5</td><td>图形界面</td></tr><tr><td>6</td><td>重启</td></tr></tbody></table><h3 id="5-runlevel">5.runlevel</h3><p>查看用户系统级别。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">runlevel<br><span class="hljs-comment"># 1 3</span><br></code></pre></td></tr></table></figure><p>表明最初的运行模式是1，而现在的运行模式是3。</p><h3 id="6-logout">6.logout</h3><p>退出登陆。</p><h2 id="九、设备文件名与挂载">九、设备文件名与挂载</h2><h3 id="1-磁盘种类">1.磁盘种类</h3><table><thead><tr><th style="text-align:left">设备文件名</th><th>含义</th></tr></thead><tbody><tr><td style="text-align:left">sd</td><td>SCSI Device（SSD硬盘、u盘）</td></tr><tr><td style="text-align:left">hd</td><td>Hard Disk 硬盘</td></tr><tr><td style="text-align:left">fd</td><td>Floppy Disk 软盘</td></tr></tbody></table><h3 id="2-设备文件名">2.设备文件名</h3><ul><li>硬盘最多四块主分区，从 sda5 开始，只能是逻辑分区。</li><li>硬盘名称是a、b、c…进行编号。<br>| 硬盘编号 | 名称 | 分区 |<br>| -------- | ---- | ------------------------------------------------------------ |<br>| 硬盘1 | sda | 主分区：sda1、sda2、sda3、sda4<br>扩展分区：sda5、sda6、sda7… |<br>| 硬盘2 | sdb | 主分区：sdb1、sdb2、sdb3、sdb4<br>扩展分区：sdb5、sdb6、sdb7… |<br>| 硬盘3 | sdc | |</li></ul><h3 id="3-fdisk">3.fdisk</h3><p>查看所有设备文件</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">fdisk -l<br></code></pre></td></tr></table></figure><h3 id="4-mount">4.mount</h3><blockquote><p>装载命令</p></blockquote><p>（1）查询挂载</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">mount<br><span class="hljs-comment"># 末尾几行会显示 「设备名」on 「挂载点」type 「文件系统类型」</span><br><span class="hljs-comment"># /dev/sdb1 on /mnt/udisk type vfat (rw,relatime,fmask=0022,dmask=0022,codepage=437,iocharset=ascii,shortname=mixed,errors=remount-ro)</span><br></code></pre></td></tr></table></figure><p>（2）依据配置文件 /etc/fstab 的内容，自动挂载</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">mount -<span class="hljs-selector-tag">a</span><br></code></pre></td></tr></table></figure><p>（3）挂载命令格式<br><strong>mount 【-t 文件系统】【-o 特殊选项】【设备文件名】【挂载点名】</strong></p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-t</td><td>文件系统：指定挂载类型，ext3、ext4、iso9660</td></tr><tr><td>-o</td><td>特殊选项：指定挂载额外选项</td></tr></tbody></table><table><thead><tr><th>特殊选项</th><th>含义</th></tr></thead><tbody><tr><td>exec/noexec</td><td>是否允许执行</td></tr><tr><td>rw/ro</td><td>读写/只读</td></tr><tr><td>remount</td><td>重新挂载</td></tr></tbody></table><ul><li><strong>挂载光盘</strong></li></ul><p>（1）建立挂载点</p><blockquote><p>手动挂载时，挂载点应在 <code>/mnt/</code> 下的某个文件夹（自己创建即可）。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">mkdir</span> /mnt/cdrom/<br></code></pre></td></tr></table></figure><p>（2）挂载</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">mount -t iso9660 /dev/cdrom /mnt/cdrom <br></code></pre></td></tr></table></figure><p><code>-t iso9660</code>：文件系统<br><code>/dev/cdrom</code> 或者 <code>dev/cdorm</code>：光驱设备名，<code>/dev/cdrom</code> 是 <code>/dev/sr0</code> 的软连接。<br><code>/mnt/cdrom</code>：挂载点<br>（3）简化挂载</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">mount /dev/sr0 /mnt/cdrom<br></code></pre></td></tr></table></figure><ul><li><strong>挂载U盘</strong></li></ul><p>（1）查看U盘设备文件名</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">fdisk -l<br></code></pre></td></tr></table></figure><p>（2）建立挂载点</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">mkdir</span> /mnt/usb<br></code></pre></td></tr></table></figure><p>（3）挂载</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">mount -t vfat /dev/sdb1 /mnt/usb/<br></code></pre></td></tr></table></figure><p><code>-t vfat</code>：Fat32 格式。<br><code>/dev/sdb1</code>：<code>fdisk -l</code>命令查询到的U盘设备文件名。<br><code>/mnt/usb/</code>：U盘挂载点</p><h3 id="5-umount">5.umount</h3><blockquote><p>卸载命令</p></blockquote><p><strong>umount 【设备文件名或者挂载点】</strong></p><blockquote><p>先退出光盘/U盘所在位置，再卸载光盘/U盘。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 卸载光盘（以下两种写法均可）</span><br>umount /dev/sr0  <span class="hljs-comment"># 设备文件</span><br>umount /mnt/cdrom  <span class="hljs-comment"># 挂载点</span><br></code></pre></td></tr></table></figure><h2 id="十、用户管理">十、用户管理</h2><h3 id="1-w、who、whoami">1.w、who、whoami</h3><blockquote><p>w、who：查看登录用户信息</p><p>whoami：查看当前用户</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">w<br><span class="hljs-comment"># 04:13:04 up  1:04,  1 user,  load average: 0.00, 0.01, 0.04</span><br><span class="hljs-comment"># USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="hljs-comment"># root     pts/0    gateway          03:33    0.00s  0.32s  0.03s w</span><br></code></pre></td></tr></table></figure><table><thead><tr><th>字段</th><th>含义</th></tr></thead><tbody><tr><td>USERs</td><td>登录的用户名</td></tr><tr><td>TTY</td><td>登陆的终端</td></tr><tr><td>FROM</td><td>从哪个IP地址登陆</td></tr><tr><td>LOGIN@</td><td>登录时间</td></tr><tr><td>IDLE</td><td>用户闲置时间</td></tr><tr><td>JCPU</td><td>和该终端连接的所有进程占用的时间<br>这个时间不包括过去的后台作业所占用的时间</td></tr><tr><td>PCPU</td><td>当前进程所占用的时间</td></tr><tr><td>WHAT</td><td>当前正在运行的命令</td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">who</span><br><span class="hljs-comment"># root     tty1         2020-12-21 14:52</span><br><span class="hljs-comment"># root     pts/0        2020-12-12 03:33 (gateway)</span><br></code></pre></td></tr></table></figure><p><code>root</code>：用户名<br><code>pts/0、tty1</code>：登陆终端</p><ul><li><code>tty1</code>：<code>tty1</code> ~ <code>tty6</code> 文字终端；<code>tty7</code> 桌面终端。</li><li><code>pts/0</code>：设备终端（黑窗口）<br><code>2020-12-12 03:33</code>：登陆时间<br><code>(gateway)</code>：登陆来源IP地址</li></ul><h3 id="2-last">2.last</h3><blockquote><p>查询当前登录和过去登录的用户信息</p></blockquote><p>last 命令默认读取 <code>/var/log/wtmp</code> 文件数据。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">last<br><span class="hljs-comment"># root  pts/0  172.16.103.1  Tue Sep 15 02:42 - 02:47  (00:04)</span><br></code></pre></td></tr></table></figure><p><code>root</code>：登录名<br><code>pts/0</code>：登录终端<br><code>172.16.103.1</code>：登录IP<br><code>Tue Sep 15 02:42 - 02:47</code>：登录时间 - 退出时间<br><code>(00:04)</code>：在线时间</p><h3 id="3-lastlog">3.lastlog</h3><blockquote><p>查看所有用户最后一次登录时间。</p></blockquote><p>lastlog 命令默认读取 <code>/var/log/lastlog</code> 文件内容。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">lastlog<br><span class="hljs-comment"># 用户名    端口     来自    最后登陆时间</span><br><span class="hljs-comment"># root     pts/1           六 12月 12 07:37:38 +0800 2020</span><br></code></pre></td></tr></table></figure><h3 id="4-用户增删改">4.用户增删改</h3><p>（1）添加用户</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">useradd new_user_name<br><span class="hljs-comment"># 创建用户 user_name，并加入到用户组 group_name。</span><br>useradd -g group_name user_name<br></code></pre></td></tr></table></figure><p>（2）查看用户权限</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">id</span> user_name<br></code></pre></td></tr></table></figure><p>（3）更改密码</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">passwd user_name<br>passwd  <span class="hljs-comment">#更改当前登录的用户密码</span><br></code></pre></td></tr></table></figure><p>（4）删除用户</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 保存 user_name 的 home 目录</span><br>userdel user_name<br><br><span class="hljs-comment"># 不保存 user_name 的 home 目录</span><br>userdel -r user_name<br></code></pre></td></tr></table></figure><p>（5）增加用户组</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">groupadd group_name<br></code></pre></td></tr></table></figure><p>（6）更改用户组</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 将 user_name 的用户组更改为 group_name。</span><br>usermod -g group_name user_name<br></code></pre></td></tr></table></figure><p>（7）查看所有用户和用户组</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 查看所有用户</span><br>lees /etc/password<br><br><span class="hljs-comment"># 查看所有用户组</span><br>less /etc/group<br></code></pre></td></tr></table></figure><p>（8）切换用户</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">su user_name<br><br><span class="hljs-comment"># 切换用户的同时，将运行环境切换至 user_name 的 home 目录下。</span><br>su - user_name<br></code></pre></td></tr></table></figure><h2 id="十一、软件安装">十一、软件安装</h2><h3 id="1-安装-ifconfig">1.安装 ifconfig</h3><ul><li>发现没有 ifconfig 命令</li><li>yum install ifconfig 安装不上</li><li>yum search ifconfig 查看 ifconfig 在哪个安装包中。发现是 net-tools.x86_64</li><li>yum install net-tools.x86_64 发现安装不上</li><li>yum install net-tools</li><li>安装成功！</li></ul><h2 id="十二、shell">十二、shell</h2><blockquote><p>shell：命令行解释器。</p><p>用户 ==&gt; shell ==&gt; 内核（硬件）</p></blockquote><h3 id="1-shell-分类">1.shell 分类</h3><ul><li>Bourne shell：主文件名为 sh。</li><li>C shell：主要在 BSD 版的 Unix 系统中使用，因语法与 C 语言相似而得名。<br>在语法上，Bourne 和 C 互不兼容。</li><li>Bourne 包括 sh、ksh、bash、psh、zsh。</li><li>C 家族包括 csh、tcsh。</li></ul><h3 id="2-查看-shell-类型">2.查看 shell 类型</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># $ 号是调用变量名。</span><br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$SHELL</span><br><br><span class="hljs-comment"># 查看主机上有多少种 shell。</span><br>vi /etc/shells<br>chsh -l<br></code></pre></td></tr></table></figure><h3 id="3-切换-shell-类型">3.切换 shell 类型</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 改变当前设置为 /bin/zsh，更改完 shell 重启一下。</span><br>chsh -s /bin/zsh<br></code></pre></td></tr></table></figure><h2 id="十三、脚本">十三、脚本</h2><h3 id="1-echo">1.echo</h3><p><strong>echo 【选项】【输出内容】</strong></p><p>选项<code>-e</code>：支持反斜线控制的字符转换。</p><table><thead><tr><th>字符转换</th><th>含义</th></tr></thead><tbody><tr><td>\a</td><td>输出警告音</td></tr><tr><td>\b</td><td>退格键</td></tr><tr><td>\n</td><td>换行符</td></tr><tr><td>\r</td><td>回车键</td></tr><tr><td>\t</td><td>水平制表符</td></tr><tr><td>\v</td><td>垂直制表</td></tr><tr><td>\0nnn</td><td>将 nnn 转化为八进制，输出ASCII码</td></tr><tr><td>\xnn</td><td>将 nn 转化为十六进制，输出ASCII码</td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\0141&quot;</span>  <span class="hljs-comment"># 十进制141等于八进制97，对应ASCII码是 a</span><br><span class="hljs-comment"># a</span><br><br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\x61&quot;</span>   <span class="hljs-comment"># 十进制61等于十六进制97，对应ASCII码是 a</span><br><span class="hljs-comment"># a</span><br></code></pre></td></tr></table></figure><table><thead><tr><th>代码</th><th>颜色</th></tr></thead><tbody><tr><td>30m</td><td>黑</td></tr><tr><td>31m</td><td>红</td></tr><tr><td>32m</td><td>绿</td></tr><tr><td>33m</td><td>黄</td></tr><tr><td>34m</td><td>蓝</td></tr><tr><td>35m</td><td>粉红</td></tr><tr><td>36m</td><td>青</td></tr><tr><td>37m</td><td>白</td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\e[1;31m 好好好学习 \e[0m&quot;</span><br></code></pre></td></tr></table></figure><h3 id="2-脚本格式">2.脚本格式</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/zsh</span><br><span class="hljs-comment"># This frist program!</span><br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\e[1;31m 好好好学习 \e[0m&quot;</span><br></code></pre></td></tr></table></figure><p><code>#!/bin/zsh</code>：表示 shell 类型，不是格式。</p><h3 id="3-执行脚本">3.执行脚本</h3><p>（1）赋予执行权限，直接运行。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">chmod</span> 755 hello.sh<br>./hello.sh<br></code></pre></td></tr></table></figure><p>（2）通过 shell 调用执行脚本。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">zsh hello.sh<br><span class="hljs-comment"># 或者 bash hello.sh</span><br></code></pre></td></tr></table></figure><h2 id="十四、shell-功能">十四、shell 功能</h2><h3 id="1-alias">1.alias</h3><blockquote><p>命令的临时别名</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 查看所有的别名</span><br><span class="hljs-built_in">alias</span><br><br><span class="hljs-comment"># 让 vi 成为 vim 的别名。【vi=&#x27;vim&#x27;不能有空格】</span><br><span class="hljs-built_in">alias</span> vi=<span class="hljs-string">&#x27;vim&#x27;</span><br></code></pre></td></tr></table></figure><ul><li><strong>使临时别名永久生效</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">vim ~/.zshrc<br><span class="hljs-comment">#将 alias vi=&#x27;vim&#x27;  写入环境变量配置文件</span><br><span class="hljs-built_in">source</span> ~/.zshrc   <span class="hljs-comment"># 使配置文件生效</span><br></code></pre></td></tr></table></figure><ul><li><strong>临时删除别名</strong></li></ul><blockquote><p>真正删除别名需要在 ~/.zshrc 中更改。<br>unalias 【别名】</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">unalias</span> vi<br></code></pre></td></tr></table></figure><ul><li><strong>命令生效顺序</strong></li></ul><p>（1）自己写的脚本<br>（2）执行别名<br>（3）shell 的内部命令<br>（4）<code>$PATH</code> 环境变量中的目录中的命令</p><h3 id="2-快捷键">2.快捷键</h3><p><strong>方向键</strong>：</p><p><code>ctrl</code> + <code>p</code>：up，方向上键</p><p><code>ctrl</code> + <code>n</code>：next，方向下键</p><p><strong>移动光标</strong>：</p><p><code>ctrl</code> + <code>f</code>：front，光标向前移动</p><p><code>ctrl</code> + <code>b</code>：back，光标向后移动</p><p><code>ctrl</code> + <code>a</code>：光标移动到行首</p><p><code>ctrl</code> + <code>e</code>：end，光标移动到行尾</p><p><strong>删除</strong>：</p><p><code>ctrl</code> + <code>h</code>：删除光标前面的字符</p><p><code>ctrl</code> + <code>d</code>：删除光标后面的字符</p><p><code>ctrl</code> + <code>u</code>：从光标处删到行首</p><p><strong>其他</strong>：</p><p><code>ctrl</code> + <code>r</code>：在历史命令中搜索</p><p><code>ctrl</code> + <code>z</code>：把命令放入后台</p><p><code>crtl</code> + <code>L</code>：清屏</p><h3 id="3-history">3.history</h3><p>（1）查看缓存命令</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">history</span><br></code></pre></td></tr></table></figure><p>（2）清空缓存命令</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">history</span> -c<br></code></pre></td></tr></table></figure><p>（3）增加历史范围</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">vim /etc/profile<br><span class="hljs-comment"># 更改 HISTSIZE=1000</span><br></code></pre></td></tr></table></figure><p>（4）重复执行上一条命令</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">!!<br></code></pre></td></tr></table></figure><p>（5）重复执行最后一条以该字符串开头的命令</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">!a   <span class="hljs-comment"># 重复执行最后一条以该 a 开头的命令</span><br></code></pre></td></tr></table></figure><p>PS：<code>ctrl</code> + <code>r</code>：在历史命令中搜索</p><h3 id="4-输出重定向">4.输出重定向</h3><p><strong>（1）标准输入输出</strong></p><table><thead><tr><th>设备</th><th>设备文件名</th><th>文件描述符</th><th>类型</th></tr></thead><tbody><tr><td>键盘</td><td>/dev/stdin</td><td>0</td><td>标准输入</td></tr><tr><td>显示器</td><td>/dev/stdout</td><td>1</td><td>标准输出</td></tr><tr><td>显示器</td><td>/dev/sdterr</td><td>2</td><td>标准错误输出</td></tr></tbody></table><p><strong>（2）输出重定向</strong></p><ul><li>正确内容的重定向</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 将 ifconfig 的内容覆盖写入 test.log</span><br>ifconfig &gt; test.log<br><br><span class="hljs-comment"># 将 ifconfig 的内容追加写入 test.log</span><br>ifconfig &gt;&gt; test.log<br></code></pre></td></tr></table></figure><ul><li>报错信息的重定向</li></ul><blockquote><p>因为标准错误输出的文件描述符为 2。<br><strong>注意</strong>：错误信息重定向 箭头两侧均没有空格。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 将 iifconfig 的报错信息覆盖写入 err.log</span><br>iifconfig 2&gt;err.log<br><br><span class="hljs-comment"># 将 iifconfig 的报错信息追加写入 err.log</span><br>iifconfig 2&gt;&gt;err.log<br></code></pre></td></tr></table></figure><ul><li>无论命令正确错误，均写入文件。</li></ul><p><strong>注意</strong>：错误信息重定向 箭头两侧均没有空格。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 如果命令正确，将输出内容覆盖写入 test.log</span><br><span class="hljs-comment"># 如果命令错误，将报错信息覆盖写入 test.log</span><br>ifconfig &gt; test.log 2&gt;&amp;1<br><span class="hljs-comment"># 同上</span><br>ifconfig &amp;&gt; test.log<br><br><span class="hljs-comment"># 如果命令正确，将输出内容追加写入 test.log</span><br><span class="hljs-comment"># 如果命令错误，将报错信息追加写入 test.log</span><br>ifconfig &gt; test.log 2&gt;&gt;&amp;1<br><span class="hljs-comment"># 同上</span><br>ifconfig &amp;&gt;&gt; test.log<br></code></pre></td></tr></table></figure><p>特殊的例子：<br><code>/dev/null</code> 该文件是个黑洞，将输出重定向至 <code>/dev/null</code>就是将其扔进黑洞。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">ifconfig &amp;&gt; /dev/null<br></code></pre></td></tr></table></figure><ul><li>如果命令正确，将 输出内容 写入 test.log，将 <strong>空</strong> 写入 err.log。<br>如果命令错误，将 <strong>空</strong> 写入 test.log，将 报错信息 写入 err.log。<br><strong>注意</strong>：如果是覆盖写入，当内容写入 test.log，err.log中的内容也会被清空。</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 覆盖</span><br>ifconfig &gt; test.log 2&gt;err.log<br><br><span class="hljs-comment"># 追加</span><br>ifconfig &gt;&gt; test.log 2&gt;&gt;err.log<br></code></pre></td></tr></table></figure><h3 id="5-输入重定向">5.输入重定向</h3><p>举个例子，wc 命令，统计字符数，需要在键盘中输入字符进行统计。</p><p>我们可以使用输入重定向来替代我们的输入。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">wc</span> &lt; test.log<br></code></pre></td></tr></table></figure><h3 id="6-多命令执行符">6.多命令执行符</h3><table><thead><tr><th>多命令执行符</th><th>含义</th></tr></thead><tbody><tr><td>命令1 ; 命令2</td><td>先执行命令1，再执行命令2。<br>无论命令1是否报错，命令2均会执行。</td></tr><tr><td>命令1 &amp;&amp; 命令2</td><td>命令1正确执行，命令2才会执行。</td></tr><tr><td>命令1 || 命令2</td><td>命令1正确执行，命令2不会执行；<br>命令1报错，命令2才会执行。</td></tr></tbody></table><p>举个例子：</p><p>如果 <code>cd ..</code> 执行成功，才会执行 <code>echo yes</code> ，因为 <code>echo yes</code> 执行成功，所以不会执行 <code>echo no</code>。</p><p>如果 <code>cd ..</code> 执行不成功，则不会执行 <code>echo yes</code> ，因为 <code>echo yes</code> 执行失败，所以会执行 <code>echo no</code>。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">cd</span> .. &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-built_in">yes</span> || <span class="hljs-built_in">echo</span> no<br></code></pre></td></tr></table></figure><h3 id="7-管道符">7.管道符</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">命令1 | 命令2<br></code></pre></td></tr></table></figure><p>命令1 的结果，作为命令2 的操作对象。<br>例子：<strong>查看系统中的所有网络链接</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">netstat -an | grep ESTABLISHED | <span class="hljs-built_in">wc</span> -l<br></code></pre></td></tr></table></figure><p><code>netstat -an</code>：查看网络连接</p><p><code>grep ESTABLISHED</code>：查找网络连接</p><p><code>wc -l</code>：统计行号，一行一人</p><h3 id="8-通配符">8.通配符</h3><blockquote><p>假设当前目录下有 <code>abc1 abc2 abc3 abca abc_frist</code> 这几个文件。</p></blockquote><ul><li><strong>?</strong><br>匹配任意一个字符。</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">ls</span> abc？<br><span class="hljs-comment"># abc1 abc2 abc3 abca</span><br></code></pre></td></tr></table></figure><ul><li><hr></li></ul><p>匹配0个或者任意多个任意字符 ==》匹配任意内容。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">ls</span> abc*<br><span class="hljs-comment"># abc1 abc2 abc3 abca abc_frist</span><br></code></pre></td></tr></table></figure><ul><li><strong>[]</strong><br>匹配中括号中任意一个字符。</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">ls</span> abc[012]       <span class="hljs-comment"># 匹配一个字符，或0，或1，或2</span><br><span class="hljs-comment"># abc1 abc2</span><br></code></pre></td></tr></table></figure><ul><li><strong>[ - ]</strong><br>匹配一个范围中的一个字符。</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">ls</span> abc[0 - 9]     <span class="hljs-comment"># 匹配 0 到 9 之前任意一个数字</span><br><span class="hljs-comment"># abc1 abc2 abc3</span><br></code></pre></td></tr></table></figure><ul><li><strong>[^]</strong><br>逻辑非，表示匹配不是中括号内的一个字符。</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">ls</span> abc[^0 - 9]     <span class="hljs-comment"># 匹配不是 0 到 9 之前任意其他字符</span><br><span class="hljs-comment"># abca</span><br></code></pre></td></tr></table></figure><ul><li><strong>’ ’</strong><br>单引号内容中特殊字符无特殊含义。</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;$SHELL&#x27;</span><br><span class="hljs-comment"># $SHELL</span><br></code></pre></td></tr></table></figure><ul><li>&quot; &quot;<br>双引号内容中特殊字符无特殊含义。<code>$</code> ``` <code></code>` 除外。<br><code>$</code> ：调用变量名</li></ul><figure class="highlight plaintext"><figcaption><span>：反引号，引用系统命令，同样功能的还有，`$()`。</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs `">```sh<br># 把 ls 执行的结果，传递给变量 aa<br>aa=‘ls’<br>aa=$(ls)<br></code></pre></td></tr></table></figure><p><code>\</code> ：转义字符</p><h2 id="十五、进程管理">十五、进程管理</h2><h3 id="1-ps"><a target="_blank" rel="noopener" href="http://1.ps">1.ps</a></h3><ul><li><strong>ps -aux</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 查看系统中的所有用户</span><br>ps -a<br><br><span class="hljs-comment"># 查看系统中的所有用户的详细信息</span><br>ps -u<br><br><span class="hljs-comment"># 查看没有终端的应用程序</span><br>ps -x<br></code></pre></td></tr></table></figure><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-a</td><td>查看所有用户</td></tr><tr><td>-u</td><td>查看所以用户的详细信息</td></tr><tr><td>-x</td><td>查看没有终端的应用程序</td></tr></tbody></table><ul><li><strong>补充</strong><br>显示的内容更多，会显示父进程 PPID、进程组 PGID、会话 SID</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">ps ajx<br></code></pre></td></tr></table></figure><h3 id="2-kill">2.kill</h3><p>发送信号。</p><ul><li><strong>Kill -l</strong></li></ul><p>查看所有信号</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">kill</span> -l<br><span class="hljs-comment"># HUP INT QUIT ILL TRAP ABRT BUS FPE KILL USR1 SEGV USR2 PIPE ALRM TERM STKFLT CHLD CONT STOP TSTP TTIN TTOU URG XCPU XFSZ VTALRM PROF WINCH POLL PWR SYS</span><br><span class="hljs-comment"># 其中第九个是 KILL</span><br></code></pre></td></tr></table></figure><ul><li><strong>kill -9 【进程号】、kill -KILL 【进程号】</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">kill</span> -9 1234<br><span class="hljs-built_in">kill</span> -KILL 1234<br></code></pre></td></tr></table></figure><h3 id="3-env">3.env</h3><p>查看当前进程的环境变量。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">env</span> | grep PATH<br></code></pre></td></tr></table></figure><h3 id="4-top">4.top</h3><p>查看进程</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">top<br></code></pre></td></tr></table></figure><h2 id="十六、网络管理">十六、网络管理</h2><h3 id="1-ifconfig">1.ifconfig</h3><p>查看网卡</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sh">ifconfig<br><span class="hljs-comment"># ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="hljs-comment">#        inet 172.16.103.2  netmask【子网掩码】 255.255.255.0  broadcast【广播地址】 172.16.103.255</span><br><span class="hljs-comment">#         inet6 fe80::c9d7:f072:3f5c:4ba2  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="hljs-comment">#         ether【MAC地址】 00:0c:29:ae:7e:cf  txqueuelen 1000  (Ethernet)</span><br><span class="hljs-comment">#         RX packets 17671  bytes 13958154 (13.3 MiB)</span><br><span class="hljs-comment">#         RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="hljs-comment">#         TX packets 7349  bytes 2691742 (2.5 MiB)</span><br><span class="hljs-comment">#         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="hljs-comment">#         inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="hljs-comment">#         inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="hljs-comment">#         loop  txqueuelen 1000  (Local Loopback)</span><br><span class="hljs-comment">#         RX packets 0  bytes 0 (0.0 B)</span><br><span class="hljs-comment">#         RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="hljs-comment">#         TX packets 0  bytes 0 (0.0 B)</span><br><span class="hljs-comment">#         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></code></pre></td></tr></table></figure><h3 id="2-ping">2.ping</h3><p>测试连通性，使用的 ICMP 协议。</p><h3 id="3-nslookup">3.nslookup</h3><p>显示域名对应的 IP。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh">nslookup aimtao.net<br><span class="hljs-comment"># Server:        172.16.103.1</span><br><span class="hljs-comment"># Address:    172.16.103.1#53</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># Non-authoritative answer:</span><br><span class="hljs-comment"># Name:    aimtao.net</span><br><span class="hljs-comment"># Address: 203.107.43.165</span><br></code></pre></td></tr></table></figure><h2 id="十七、FTP服务器">十七、FTP服务器</h2><h3 id="1-服务器端-vsftpd">1.服务器端 vsftpd</h3><ul><li><strong>安装 vsftpd</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">yum install vsftpd<br></code></pre></td></tr></table></figure><ul><li><strong>修改配置文件</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 允许匿名用户登录</span><br>anonymous_enable=YES<br><span class="hljs-comment"># 允许本地用户登录</span><br>local_enable=YES<br><span class="hljs-comment"># 实名登录用户，拥有写权限</span><br>write_enable=YES<br><span class="hljs-comment"># 设置本地掩码为022</span><br>local_umask=022<br><span class="hljs-comment"># 匿名用户可以上传数据</span><br>anon_upload_enable=YES<br><span class="hljs-comment"># 匿名用户可以创建目录</span><br>anon_mkdir_write_enable=YES<br><br>dirmessage_enable=YES<br>xferlog_enable=YES<br>connect_from_port_20=YES<br><br><span class="hljs-comment"># 打开监听</span><br>listen=<span class="hljs-built_in">yes</span><br><span class="hljs-comment"># 【重要】不支持 ipv6，一定要关闭 ipv6 监听。</span><br><span class="hljs-comment">#listen_ipv6=YES</span><br><br>pam_service_name=vsftpd<br>userlist_enable=YES<br>tcp_wrappers=YES<br></code></pre></td></tr></table></figure><ul><li><strong>重启服务</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">service vsftpd restart<br><span class="hljs-comment"># Redirecting to /bin/systemctl restart vsftpd.service</span><br></code></pre></td></tr></table></figure><p>PS：如果重启服务出现 Job for vsftpd.service failed because the control process exited with error code. See “systemctl status vsftpd.service” and “journalctl -xe” for details。由于 CentOS7 中 vsftp 的配置文件默认将 listen_ipv6=YES 这一行没有注释掉，而我们目前的网络环境还不支持 ipv6，从而导致出现错误无法启动，所以将这一行注释掉即可。</p><h3 id="2-客户端-ftp">2.客户端 ftp</h3><ul><li><strong>安装客户端</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">yum install ftp<br></code></pre></td></tr></table></figure><ul><li><strong>实名用户登录</strong></li></ul><p>ftp + IP(server)<br>输入用户名（server）<br>输入密码</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh">ftp 172.16.103.2<br><span class="hljs-comment"># Connected to 172.16.103.2 (172.16.103.2).</span><br><span class="hljs-comment"># 220 (vsFTPd 3.0.2)</span><br><span class="hljs-comment"># Name (172.16.103.2:root): my_name</span><br><span class="hljs-comment"># 331 Please specify the password.</span><br><span class="hljs-comment"># Password:</span><br><span class="hljs-comment"># 230 Login successful.</span><br></code></pre></td></tr></table></figure><ul><li><strong>匿名用户登录</strong></li></ul><p>ftp + IP(server)<br>输入匿名用户名 anonymous<br>密码：直接回车<br><strong>【FTP 服务器端需要创建一个匿名用户的目录】</strong><br>匿名用户默认主目录：<code>/srv/ftp/</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># vim etc/vsftpd/vsftpd.conf</span><br><span class="hljs-comment"># 加入 anon_root，指定家目录。</span><br>anon_root=/home/nice/My/<br></code></pre></td></tr></table></figure><h3 id="3-ftp操作">3.ftp操作</h3><blockquote><p>注意关注进行 ftp 登录时，客户端机器所在目录。</p><p>只能上传和下载文件，目录需要打包。</p></blockquote><ul><li><strong>get</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 下载服务端当前目录下的 file_name</span><br>get file_name<br></code></pre></td></tr></table></figure><ul><li><strong>put</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 上传客户端当前目录下的 file_name</span><br>put file_name<br></code></pre></td></tr></table></figure><ul><li><strong>bye、quit、exit</strong><br>退出</li></ul><h3 id="4-客户端lftp">4.客户端lftp</h3><ul><li><strong>安装客户端</strong></li><li><strong>比ftp更智能的地方</strong>：显示当前位置</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 服务端的操作</span><br><span class="hljs-built_in">pwd</span><br><span class="hljs-built_in">cd</span><br><br><span class="hljs-comment"># 客户端本地的操作local</span><br>lpwd<br>lcd<br></code></pre></td></tr></table></figure><ul><li><strong>实名登录</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">lftp username@172.16.103.2<br><span class="hljs-comment"># 回车输入密码</span><br></code></pre></td></tr></table></figure><ul><li><strong>匿名登录</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">lftp 172.16.103.2<br></code></pre></td></tr></table></figure><h3 id="5-lftp操作">5.lftp操作</h3><table><thead><tr><th>操作</th><th>含义</th></tr></thead><tbody><tr><td>put</td><td>上传文件</td></tr><tr><td>mput</td><td>上传多个文件</td></tr><tr><td>get</td><td>下载文件</td></tr><tr><td>mget</td><td>下载多个文件</td></tr><tr><td>mirror</td><td>下载整个目录及其子目录</td></tr><tr><td>mirror -R</td><td>上传整个目录及其子目录</td></tr></tbody></table><h3 id="6-问题">6.问题</h3><ul><li><strong>ftp: connect: 没有到主机的路由</strong></li></ul><p>CentOS7的防火墙禁止了ftp客户端的访问， ftp 服务器关闭防火墙试试。</p><blockquote><p>Centos7以上的发行版都试自带了firewalld防火墙的，firewalld去掉了iptables防火墙。其原因是iptables的防火墙策略是交由内核层面的netfilter网络过滤器来处理的，而firewalld则是交由内核层面的nftables包过滤框架来处理。 相较于iptables防火墙而言，firewalld支持动态更新技术并加入了区域（zone）的概念。简单来说，区域就是firewalld预先准备了几套防火墙策略集合（策略模板），用户可以根据生产场景的不同而选择合适的策略集合，从而实现防火墙策略之间的快速切换。</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 关闭防火墙，不要使用 systemctl stop iptables</span><br>systemctl stop firewalld<br></code></pre></td></tr></table></figure><ul><li><strong>500 OOPS: vsftpd: refusing to run with writable root inside chroot()</strong></li></ul><p><strong>Login failed.</strong><br><strong>421 Service not available, remote server has closed connection</strong><br>从2.3.5之后，vsftpd增强了安全检查，如果用户被限定在了其主目录下，则该用户的主目录不能再具有写权限了！如果检查发现还有写权限，就会报该错误。<br>修改主目录写权限即可；若要上传文件，可上传到主目录下的其他目录。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">chmod</span> a-x my_ftp<br></code></pre></td></tr></table></figure><h3 id="7-scp">7.scp</h3><blockquote><p>Super copy</p></blockquote><ul><li><strong>本地拷贝到远程服务器</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 将本地的 my_file 文件拷贝给 172.16.103.2 的 /root/ 目录下</span><br>scp my_file root@172.16.103.2:/root<br><br><span class="hljs-comment"># 将本地的 my_file 文件拷贝给 172.16.103.2 的 /root/ 目录下，并命名为 your_file</span><br>scp my_file root@172.16.103.2:/root/your_file<br></code></pre></td></tr></table></figure><ul><li><strong>远程服务器拷贝到本地</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 将 172.16.103.2 的 /root/your_file 拷贝到本地 /root 目录下。</span><br>scp root@172.16.103.2:/root/your_file /root<br></code></pre></td></tr></table></figure><ul><li><strong>拷贝目录</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">scp -r <span class="hljs-built_in">dir</span> root@172.16.103.2:/root<br></code></pre></td></tr></table></figure><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-r</td><td>递归拷贝整个目录</td></tr></tbody></table><h2 id="十八、NFS服务器">十八、NFS服务器</h2><h3 id="1-服务端-nfs-utils">1.服务端 nfs-utils</h3><ul><li><strong>安装 nfs-utils</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">yum install -y nfs-utils<br></code></pre></td></tr></table></figure><ul><li><strong>创建共享目录</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">mkdir</span> /root/nfsroot<br></code></pre></td></tr></table></figure><ul><li><strong>修改配置文件</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># vim /etc/exports</span><br>/root/nfsroot 172.16.*.*(rw,<span class="hljs-built_in">sync</span>)  <span class="hljs-comment"># 或者只读 (ro, sync)</span><br></code></pre></td></tr></table></figure><p>rw：支持读写<br>sync：内存中的数据实时更新到磁盘上。</p><ul><li><strong>重启服务</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">service nfs restart<br></code></pre></td></tr></table></figure><h3 id="2-客户端">2.客户端</h3><ul><li><strong>安装 nfs-utils</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">yum install -y nfs-utils<br></code></pre></td></tr></table></figure><ul><li><strong>挂载 nfs服务器</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">mount 172.16.103.2:/root/nfsroot /mnt<br></code></pre></td></tr></table></figure><h2 id="十九、文本编辑器-vim">十九、文本编辑器 vim</h2><h3 id="1-移动光标">1.移动光标</h3><blockquote><p>命令模式</p></blockquote><table><thead><tr><th>h</th><th>j</th><th>k</th><th>l</th></tr></thead><tbody><tr><td>←</td><td>↓</td><td>↑</td><td>→</td></tr></tbody></table><table><thead><tr><th>快捷键</th><th>含义</th></tr></thead><tbody><tr><td>0</td><td>行首</td></tr><tr><td>$</td><td>行尾</td></tr><tr><td></td><td></td></tr><tr><td>gg</td><td>文件开始</td></tr><tr><td>G</td><td>文件末尾</td></tr><tr><td></td><td></td></tr><tr><td>300G</td><td>行跳转（跳转到300行）</td></tr></tbody></table><h3 id="2-删除">2.删除</h3><blockquote><p>命令模式</p></blockquote><blockquote><p>Linux <strong>删除</strong> 其实是 <strong>剪切</strong>，在剪切版中。</p></blockquote><table><thead><tr><th>快捷键</th><th>含义</th></tr></thead><tbody><tr><td>x（小写）</td><td>删除光标后的字符（光标所覆盖的字符）</td></tr><tr><td>X（大写）</td><td>删除光标前的字符</td></tr><tr><td></td><td></td></tr><tr><td>dw</td><td>删除光标后的第一个单词</td></tr><tr><td></td><td></td></tr><tr><td>d0</td><td>从光标处一直删除到行首</td></tr><tr><td>d$</td><td>从光标处一直删除到行尾</td></tr><tr><td>D</td><td>同 d$</td></tr><tr><td></td><td></td></tr><tr><td>dd</td><td>删除整行</td></tr><tr><td>3dd</td><td>从当前行开始，删除3整行</td></tr><tr><td></td><td></td></tr><tr><td>u</td><td>撤销（恢复删除的内容）</td></tr><tr><td>ctrl+r</td><td>反撤销</td></tr></tbody></table><h3 id="3-复制">3.复制</h3><blockquote><p>命令模式</p></blockquote><table><thead><tr><th>快捷键</th><th>含义</th></tr></thead><tbody><tr><td>yy</td><td>复制</td></tr><tr><td>nyy</td><td>复制 n 行</td></tr></tbody></table><h3 id="4-粘贴">4.粘贴</h3><blockquote><p>命令模式</p></blockquote><table><thead><tr><th>快捷键</th><th>含义</th></tr></thead><tbody><tr><td>p（小写）</td><td>粘贴到光标所在行的下一行</td></tr><tr><td>P（大写）</td><td>粘贴到光标所在行</td></tr></tbody></table><h3 id="5-查找">5.查找</h3><blockquote><p>命令模式</p></blockquote><blockquote><p>以查找字符“linux”为例，</p></blockquote><table><thead><tr><th>用法</th><th>含义</th></tr></thead><tbody><tr><td>/linux</td><td>光标处向下查询</td></tr><tr><td>?linux</td><td>光标处向上查询</td></tr><tr><td>讲光标移至想要查询的单词上，按#</td><td>高亮显示该单词</td></tr></tbody></table><table><thead><tr><th>快捷键</th><th>含义</th></tr></thead><tbody><tr><td>n</td><td>从当前高亮字符，跳转到下一个高亮字符</td></tr><tr><td>N</td><td>从当前高亮字符，跳转到上一个高亮字符</td></tr></tbody></table><h3 id="6-缩进">6.缩进</h3><blockquote><p>命令模式</p></blockquote><table><thead><tr><th>快捷键</th><th>含义</th></tr></thead><tbody><tr><td>&gt;&gt;</td><td>向右缩进</td></tr><tr><td>&lt;&lt;</td><td>向左缩进</td></tr></tbody></table><h3 id="7-替换单个字符">7.替换单个字符</h3><blockquote><p>命令模式</p></blockquote><ol><li>光标选中该字符</li><li>按 r</li><li>输入替换的字符（单个）</li></ol><h3 id="8-man文档查看">8.man文档查看</h3><blockquote><p>命令模式</p></blockquote><p>以查看 printf 的 man 文档为例，光标放在 printf 上，按 shift + k。</p><p>上述操作会进入 man 文档的第一章，但 printf 是函数，应该在 man 文档中的第三章。</p><p>所以需要先按 3，再按 shift + k。这样才能进入正确的 man 文档。</p><h3 id="9-ZZ-保存退出">9.ZZ 保存退出</h3><blockquote><p>命令模式</p></blockquote><p>命令模式下，两个 ZZ 保存推出。（大写Z）</p><h3 id="10-可视模式">10.可视模式</h3><p>v：进入可视模式。</p><p><strong>在可视模式下</strong>，可进行选中、复制、删除。</p><table><thead><tr><th>快捷键</th><th>含义</th></tr></thead><tbody><tr><td>←↓↑→ 或者 hjkl</td><td>选中</td></tr><tr><td>d</td><td>删除选中</td></tr><tr><td>y</td><td>复制选中</td></tr><tr><td>p（小写）</td><td>光标所在字符后面粘贴选中</td></tr><tr><td>P（大写）</td><td>光标前面粘贴选中</td></tr></tbody></table><h3 id="11-插入模式">11.插入模式</h3><table><thead><tr><th>快捷键</th><th>含义</th></tr></thead><tbody><tr><td>i</td><td>光标前插入</td></tr><tr><td>a</td><td>光标后插入</td></tr><tr><td>A</td><td>跳转到行尾插入</td></tr><tr><td>I（大写）</td><td>跳转到行首插入</td></tr><tr><td>s</td><td>删除光标所在字符，并插入</td></tr><tr><td>S（大写）</td><td>删除光标所在行，并插入</td></tr></tbody></table><h3 id="12-跳转">12.跳转</h3><blockquote><p>末行模式</p></blockquote><ol><li>输入 <code>:</code> 后，</li><li>输入想要跳转的行号。</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">:500    <span class="hljs-comment"># 跳转第 500 行，同命令模式下的 500G 的作用</span><br></code></pre></td></tr></table></figure><h3 id="13-替换">13.替换</h3><blockquote><p>末行模式</p></blockquote><p><strong>例子一</strong>：将 <strong>25 行</strong>的 <mark>第一个</mark> abc 替换为 eeee。</p><ol><li>光标移动到想要替换的行，25 行。</li><li>输入命令</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">:s/abc/eeee<br></code></pre></td></tr></table></figure><ul><li>s：表示字符串</li></ul><p><strong>例子二</strong>：将 <strong>25 行</strong>的 <mark>所有</mark> abc 替换为 eeee。</p><ol><li>光标移动到想要替换的行，25 行。</li><li>输入命令</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">:s/abc/eeee/g<br></code></pre></td></tr></table></figure><ul><li>s：表示字符串</li><li>g：表示整行全部都替换</li></ul><p><strong>例子三</strong>：将<strong>全文的</strong> <mark>所有的第一个</mark> abc 替换成 eeee。</p><p>输入命令</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">:%s/abc/eeee<br></code></pre></td></tr></table></figure><ul><li>%：表示所有的行</li><li>s：表示字符串</li></ul><p><strong>例子四</strong>：将<strong>全文的</strong> <mark>所有</mark> abc 替换成 eeee。</p><p>输入命令</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">:%s/abc/eeee/g<br></code></pre></td></tr></table></figure><ul><li>%：表示所有的行</li><li>s：表示字符串</li></ul><p><strong>例子五</strong>：将<strong>15行～20行的</strong> <mark>所有</mark> abc 替换成 eeee。</p><p>输入命令</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">:15,20s/abc/eeee/g<br></code></pre></td></tr></table></figure><ul><li>%：表示所有的行</li><li>s：表示字符串</li><li>15,20：表示从 15 行 ～ 20 行。</li></ul><p><strong>总结</strong></p><table><thead><tr><th>符号</th><th>含义</th></tr></thead><tbody><tr><td>s</td><td>表示字符串</td></tr><tr><td>%</td><td>表示全文</td></tr><tr><td>g</td><td>表示整行中的所有该字符</td></tr><tr><td>15，20</td><td>从15行到20行</td></tr></tbody></table><h3 id="14-执行其他命令">14.执行其他命令</h3><blockquote><p>末行模式</p></blockquote><p>在<strong>末行模式</strong>可以在当前目录执行一些命令。</p><figure class="highlight cc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cc"><span class="hljs-comment">// 在当前目录执行 ls 命令。</span><br>:!ls<br></code></pre></td></tr></table></figure><h3 id="15-vi分屏">15.vi分屏</h3><blockquote><p>末行模式</p></blockquote><table><thead><tr><th>快捷键</th><th>含义</th></tr></thead><tbody><tr><td>:sp</td><td>水平分屏（上下分）（同文件）</td></tr><tr><td>:vsp</td><td>垂直分屏（左右分）（同文件）</td></tr><tr><td>:sp 1.txt</td><td>水平分屏（当前文件和1.txt）</td></tr><tr><td>:vsp 1.txt</td><td>垂直分屏（当前文件和1.txt）</td></tr><tr><td>:wqall</td><td>保存两个文件并退出</td></tr><tr><td>:wall</td><td>保存两个屏幕</td></tr></tbody></table><p>分屏后，切换窗口：</p><blockquote><p>命令模式</p></blockquote><table><thead><tr><th>快捷键</th><th>含义</th></tr></thead><tbody><tr><td>ctrl + w 后，w</td><td>循环切换窗口</td></tr><tr><td>ctrl + w 后，k</td><td>上面窗口</td></tr><tr><td>ctrl + w 后，j</td><td>下面窗口</td></tr><tr><td>ctrl + w 后，l</td><td>右边窗口</td></tr><tr><td>ctrl + w 后，h</td><td>左边窗口</td></tr></tbody></table><p>光标所在窗口和其他窗口互换位置：</p><table><thead><tr><th>快捷键</th><th>含义</th></tr></thead><tbody><tr><td>ctrl + w 后，K</td><td>光标所在窗口和上面窗口换位</td></tr><tr><td>ctrl + w 后，J</td><td>光标所在窗口和下面窗口换位</td></tr><tr><td>ctrl + w 后，L</td><td>光标所在窗口和右边窗口换位</td></tr><tr><td>ctrl + w 后，H</td><td>光标所在窗口和左边窗口换位</td></tr></tbody></table><p>关闭光标所在窗口：</p><p>ctrl + w 后，c</p><h3 id="16-设置行号">16.设置行号</h3><p><strong>临时显示</strong>：命令模式下，set number 或者 set nu。<br><strong>临时隐藏</strong>：命令模式下，set nonumber 或者 set nonu。<br><strong>当前用户永久显示</strong>： vim ~/.vimrc，添加一行 set number。<br><strong>系统用户永久显示</strong>： vim /etc/vimrc，添加一行 set number。</p><h2 id="二十、SSH">二十、SSH</h2><p>查看端口，是否有 22 端口号，如果不存在则安装 openssh。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">netstat -l<br></code></pre></td></tr></table></figure><p>设置 <code>/etc/ssh/sshd_config</code></p><ul><li><code>PermitRootLogin</code>：是否允许 root 用户通过 SSH 登录。</li><li><code>PasswordAuthentication</code>：是否允许使用密码进行登录。</li><li><code>PubkeyAuthentication</code>：设置是否允许使用公钥认证方式进行登录。</li><li>设置完重启 ssh<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">sudo</span> systemctl restart ssh<br></code></pre></td></tr></table></figure></li></ul><p>报错排查</p><ul><li>Received disconnect from 192.168.47.128 port 22:2: Too many authentication failures<ul><li>调整 <code>/etc/ssh/sshd_config</code> 的 MaxAuthTries 更大</li></ul></li><li>Permission denied, please try again.<ul><li>查看服务器日志，确认明确问题：<code>/var/log/auth.log</code></li><li>关闭防火墙</li><li>解锁用户<ul><li><code>sudo passwd root</code>：设置密码，并解锁用户</li><li><code>sudo usermod -U root</code>：解锁用户，但前提是设置了密码，否则会产成没有密码的账户</li></ul></li></ul></li></ul><h2 id="二十一、其他">二十一、其他</h2><h3 id="1-Linux-版本">1.Linux 版本</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">uname</span>  -a<br></code></pre></td></tr></table></figure><h3 id="2-查看机器当前时间">2.查看机器当前时间</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-built_in">date</span><br></code></pre></td></tr></table></figure><h3 id="3-清屏">3.清屏</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">clear<br>reset<br></code></pre></td></tr></table></figure><p>快捷键：<code>crtl</code> + <code>L</code></p><script type="text/javascript">!function(l){[].forEach.call(l.getElementsByClassName("fold"),(function(l){l.getElementsByClassName("fold-title")[0].onclick=function(){l.classList.toggle("collapsed"),l.classList.toggle("expanded")}}))}(document)</script></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/Mark/" class="category-chain-item">Mark</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/Linux/">#Linux</a></div></div><div class="license-box my-3"><div class="license-title"><div>学习笔记｜Linux 命令</div><div>https://www.aimtao.net/linux/</div></div><div class="license-meta"><div class="license-meta-item license-meta-date"><div>Posted on</div><div>2018-11-21</div></div><div class="license-meta-item"><div>Licensed under</div><div><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - Attribution"><i class="iconfont icon-by"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - Non-commercial"><i class="iconfont icon-nc"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - Share-alike"><i class="iconfont icon-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/mooc-chaoxing/" title="刷学习通等各类学习软件视频"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">刷学习通等各类学习软件视频</span> <span class="visible-mobile">Previous</span></a></article><article class="post-next col-6"><a href="/html/" title="学习笔记｜HTML"><span class="hidden-mobile">学习笔记｜HTML</span> <span class="visible-mobile">Next</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments"><div id="valine"></div><style>.v[data-class=v] .veditor{background-image:url(https://hutu0.aimtao.net/foot/drinkwater.webp);background-size:contain;background-repeat:no-repeat;background-position:right;resize:none}</style><script type="text/javascript">Fluid.utils.loadComments("#valine",(function(){Fluid.utils.createScript("https://cdn.staticfile.org/valine/1.4.18/Valine.min.js",(function(){var e=Object.assign({appId:"Lwz6D7d9XSdSYpjixPxukzhF-gzGzoHsz",appKey:"UhkN5uCsv1zxjYO6nJ7vOjpB",path:"window.location.pathname",placeholder:"本站支持评论邮件提醒功能，在上方输入邮箱，即可收到回复通知！（支持 markdown 语法）",avatar:"robohash",meta:["nick","mail","link"],requiredFields:[],pageSize:10,lang:"zh-CN",highlight:!0,recordIP:!0,serverURLs:"https://valine.aimtao.net",emojiCDN:"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/",emojiMaps:{666:"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/6c/2022_666_org.png","微笑":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/e3/2018new_weixioa02_org.png","可爱":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/09/2018new_keai_org.png","太开心":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/1e/2018new_taikaixin_org.png","鼓掌":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/6e/2018new_guzhang_org.png","嘻嘻":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/33/2018new_xixi_org.png","哈哈":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/8f/2018new_haha_org.png","笑cry":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/4a/2018new_xiaoku_thumb.png","挤眼":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/43/2018new_jiyan_org.png","馋嘴":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/fa/2018new_chanzui_org.png","黑线":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/a3/2018new_heixian_org.png","汗":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/28/2018new_han_org.png","挖鼻":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/9a/2018new_wabi_thumb.png","哼":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/7c/2018new_heng_org.png","怒":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/f6/2018new_nu_org.png","委屈":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/a5/2018new_weiqu_org.png","可怜":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/96/2018new_kelian_org.png","失望":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/aa/2018new_shiwang_org.png","悲伤":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/ee/2018new_beishang_org.png","泪":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/6e/2018new_leimu_org.png","允悲":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/83/2018new_kuxiao_org.png","苦涩":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/7e/2021_bitter_org.png","害羞":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/c1/2018new_haixiu_org.png","污":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/10/2018new_wu_org.png","爱你":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/f6/2018new_aini_org.png","亲亲":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/2c/2018new_qinqin_org.png","抱一抱":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/af/2020_hug_org.png","色":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/9d/2018new_huaxin_org.png","憧憬":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/c9/2018new_chongjing_org.png","舔屏":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/3e/2018new_tianping_org.png","哇":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/3d/2022_wow_org.png","坏笑":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/4d/2018new_huaixiao_org.png","阴险":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/9e/2018new_yinxian_org.png","笑而不语":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/2d/2018new_xiaoerbuyu_org.png","偷笑":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/71/2018new_touxiao_org.png","酷":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/c4/2018new_ku_org.png","并不简单":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/aa/2018new_bingbujiandan_org.png","思考":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/30/2018new_sikao_org.png","疑问":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/b8/2018new_ningwen_org.png","费解":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/2a/2018new_wenhao_org.png","晕":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/07/2018new_yun_org.png","衰":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/a2/2018new_shuai_org.png","骷髅":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/a1/2018new_kulou_org.png","嘘":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/b0/2018new_xu_org.png","闭嘴":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/62/2018new_bizui_org.png","傻眼":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/dd/2018new_shayan_org.png","裂开":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/1b/202011_liekai_org.png","感冒":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/8c/2022_cold_org.png","吃惊":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/49/2018new_chijing_org.png","吐":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/08/2018new_tu_org.png","生病":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/3b/2018new_shengbing_org.png","拜拜":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/fd/2018new_baibai_org.png","鄙视":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/da/2018new_bishi_org.png","白眼":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/ef/2018new_landelini_org.png","左哼哼":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/43/2018new_zuohengheng_org.png","右哼哼":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/c1/2018new_youhengheng_org.png","抓狂":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/17/2018new_zhuakuang_org.png","怒骂":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/87/2018new_zhouma_org.png","打脸":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/cb/2018new_dalian_org.png","顶":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/ae/2018new_ding_org.png","互粉":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/86/2018new_hufen02_org.png","钱":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/a2/2018new_qian_org.png","哈欠":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/55/2018new_dahaqian_org.png","困":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/3c/2018new_kun_org.png","睡":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/e2/2018new_shuijiao_thumb.png","赢牛奶":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/9c/2021_yingniunai_org.png","开学季":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/72/2021_kaixueji_org.png","求饶":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/aa/moren_qiurao02_org.png","吃瓜":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/01/2018new_chigua_org.png","打call":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/39/moren_dacall02_org.png",awsl:"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/14/moren_awsl02_org.png","彩虹屁":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/4b/2022_praise_org.png","酸":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/b3/hot_wosuanle_org.png",doge:"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/a1/2018new_doge02_org.png","二哈":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/22/2018new_erha_org.png","喵喵":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/7b/2018new_miaomiao_org.png","单身狗":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/20/2021_alongdog_org.png","揣手":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/af/2022_chuaishou_org.png","举手":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/fd/2022_raisehand_org.png","抱抱":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/42/2018new_baobao_org.png","摊手":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/62/2018new_tanshou_org.png","跪了":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/75/2018new_gui_org.png","握手":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/e9/2018new_woshou_org.png","赞":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/e6/2018new_zan_org.png",good:"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/8a/2018new_good_org.png","弱":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/3d/2018new_ruo_org.png","耶":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/29/2018new_ye_org.png","拳头":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/86/2018new_quantou_org.png",ok:"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/45/2018new_ok_org.png","加油":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/9f/2018new_jiayou_org.png","作揖":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/e7/2018new_zuoyi_org.png",haha:"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/1d/2018new_hahashoushi_org.png","鲜花":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/d4/2018new_xianhua_org.png","杰瑞":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/da/2021_jerry_org.png","汤姆":"https://face.t.sinajs.cn/t4/appstyle/expression/ext/normal/31/2021_tom_org.png","tvgif-白眼":"https://i0.hdslb.com/bfs/emote/48f75163437445665a9be80bb316e4cb252c5415.gif","tvgif-doge":"https://i0.hdslb.com/bfs/emote/302d6c88c63ed162c81a49cafe7ed2709e6fb955.gif","tvgif-坏笑":"https://i0.hdslb.com/bfs/emote/5d2572efd09aab5dde9e2a198bb3f9ac1e2a982e.gif","tvgif-难过":"https://i0.hdslb.com/bfs/emote/9c6b41008a67755410f712334c64313df5f91b3f.gif","tvgif-生气":"https://i0.hdslb.com/bfs/emote/1902a5a2df5b5c931d88c12f0feb264b1e109d0d.gif","tvgif-委屈":"https://i0.hdslb.com/bfs/emote/af5a5853edb43a8178a8cb5df707fa5e88143699.gif","tvgif-斜眼笑":"https://i0.hdslb.com/bfs/emote/c66568b471192ca1f62f6ed4384dc1b283ab7508.gif","tvgif-呆":"https://i0.hdslb.com/bfs/emote/d3fa91e4db9215eb1e20ab9da44f1214aa4bda7b.gif","tvgif-发怒":"https://i0.hdslb.com/bfs/emote/3959eb81b952e4fa8d269d98f9e3639172d84073.gif","tvgif-惊吓":"https://i0.hdslb.com/bfs/emote/13549060757fcd92b11d0657d9b3b6038f97abb6.gif","tvgif-呕吐":"https://i0.hdslb.com/bfs/emote/db58e9442aae26694af18cc1683607cca3a16763.gif","tvgif-思考":"https://i0.hdslb.com/bfs/emote/b63f9146bfd985af014f8d6d4bdb498805be48f9.gif","tvgif-微笑":"https://i0.hdslb.com/bfs/emote/b98656855d782f61cb8edc7f7fca6563ecafff7e.gif","tvgif-疑问":"https://i0.hdslb.com/bfs/emote/fce1b1a0f3b0e39a2dc16a18508dba7b91e929f4.gif","tvgif-大哭":"https://i0.hdslb.com/bfs/emote/cba61f05f3039b02a7ffc0dfcd9d7995df9fdd74.gif","tvgif-鼓掌":"https://i0.hdslb.com/bfs/emote/be106e6b265883a9f28fbe10f7b765701e2618d4.gif","tvgif-抠鼻":"https://i0.hdslb.com/bfs/emote/696d9f93e722144dc2a78aeffc569418fdf3d565.gif","tvgif-亲亲":"https://i0.hdslb.com/bfs/emote/3534ea44ab74bd20352b88c245a06c4b4c46d271.gif","tvgif-调皮":"https://i0.hdslb.com/bfs/emote/fcd967395fd14e4dd5829fa7e8a967ce23205e52.gif","tvgif-笑哭":"https://i0.hdslb.com/bfs/emote/1c2fd1e8c9dde12812f86e5d4cbddd8993d98082.gif","tvgif-晕":"https://i0.hdslb.com/bfs/emote/030040ec5c9ddc9e3d067658c4139e7314ab42f8.gif","tvgif-点赞":"https://i0.hdslb.com/bfs/emote/30ecff401245fb56bcc1cf588d1809ac1ab1607c.gif","tvgif-害羞":"https://i0.hdslb.com/bfs/emote/411a3e459e8580f5bfd9f639a408247c4b509935.gif","tvgif-睡着":"https://i0.hdslb.com/bfs/emote/3c8b5e293261287a6203597e29b3de07df4d18c6.gif","tvgif-色":"https://i0.hdslb.com/bfs/emote/a0c6d99ab0ab63b8648f5283ff72cec04b604828.gif","tvgif-吐血":"https://i0.hdslb.com/bfs/emote/e17e4539e169d14a3389ff147afea760cebe5de5.gif","tvgif-无奈":"https://i0.hdslb.com/bfs/emote/eb4cb5f07cfd177c7e6a7914316717e56d9cc1d0.gif","tvgif-再见":"https://i0.hdslb.com/bfs/emote/344f61609ecce2008520dc8a977b6169215748a9.gif","tvgif-流汗":"https://i0.hdslb.com/bfs/emote/390bccec65eaff536bd5bb2a0c5b8b0bdea47334.gif","tvgif-偷笑":"https://i0.hdslb.com/bfs/emote/7f11e6f7f63e79112b833bd41fa13a83d7cd8474.gif","tvgif-抓狂":"https://i0.hdslb.com/bfs/emote/a476b93ecd8e94ac3257323fd822f91cef212de2.gif","tvgif-黑人问号":"https://i0.hdslb.com/bfs/emote/b609adf664be33224a9923262031165ae3e34cd2.gif","tvgif-困":"https://i0.hdslb.com/bfs/emote/91c2bf34ecf842d7016c01d841db3d4074bd281f.gif","tvgif-打脸":"https://i0.hdslb.com/bfs/emote/b0fad4856e59c1240e448437da3287bb5ce547e5.gif","tvgif-闭嘴":"https://i0.hdslb.com/bfs/emote/a3fc5388b09e945be3f18fe23bfed5874a0285b7.gif","tvgif-鄙视":"https://i0.hdslb.com/bfs/emote/293b5d459e6264ecf314d20937a936fa672ccd1e.gif","tvgif-腼腆":"https://i0.hdslb.com/bfs/emote/30984e8264324f901d19bea85dada7103b695534.gif","tvgif-馋":"https://i0.hdslb.com/bfs/emote/2525c5703c594e5f0752f68db8948773caebde47.gif","tvgif-可爱":"https://i0.hdslb.com/bfs/emote/f92d20f76258bc5f33fc9d7c5e2a1d41fef19a7c.gif","tvgif-发财":"https://i0.hdslb.com/bfs/emote/76131e52c9b033681b4c896c6024d29ef7ec7ec2.gif","tvgif-生病":"https://i0.hdslb.com/bfs/emote/beb94829fe04f1a41bd6ca611e1f6ca9ca169afa.gif","tvgif-流鼻血":"https://i0.hdslb.com/bfs/emote/8ef473f74a849420da712487b2f56ecca1f695f5.gif","tvgif-尴尬":"https://i0.hdslb.com/bfs/emote/e0b84ef5ee3e5b8978e584c7c5a6550c51d15f84.gif","tvgif-大佬":"https://i0.hdslb.com/bfs/emote/14ca0c05382b8741940942b2430b7a8d55c02f7e.gif","暹罗猫小豆泥-抱大腿":"https://i0.hdslb.com/bfs/emote/1e309b348e969e7ff1c7d873352799a2005494d5.png","暹罗猫小豆泥-不要":"https://i0.hdslb.com/bfs/emote/00d5e138feb370186c4e473061b21b42f8a3ea36.png","暹罗猫小豆泥-呆滞":"https://i0.hdslb.com/bfs/emote/b6ec6210f8c7095f4a14ccf8a6ec1b60fb1aa416.png","暹罗猫小豆泥-单纯":"https://i0.hdslb.com/bfs/emote/e5cdb0d44f35f545d37cbc95ca09cdb9f79ebf48.png","暹罗猫小豆泥-好耶":"https://i0.hdslb.com/bfs/emote/5fc0be80c750a057d1c068a9a3c65c7b09a49e02.png","暹罗猫小豆泥-惊讶":"https://i0.hdslb.com/bfs/emote/d6024fd52d7e66241062c045559974e2a4c6e87f.png","暹罗猫小豆泥-哭":"https://i0.hdslb.com/bfs/emote/9153d549e425cc02eb911695fff29cb59b338da0.png","暹罗猫小豆泥-来了":"https://i0.hdslb.com/bfs/emote/d5d12b9d885346de164f30d41a10f235872aaefa.png","暹罗猫小豆泥-呸":"https://i0.hdslb.com/bfs/emote/a7f7d5a13c8d1c1ff116e7362108fb49045b4b72.png","暹罗猫小豆泥-探头":"https://i0.hdslb.com/bfs/emote/4741a1d527c52365850368b2f480d5818b23cb8f.png","暹罗猫小豆泥-舔":"https://i0.hdslb.com/bfs/emote/d071edebf8d3fbad73d773e9049eee2a0c28f1d5.png","暹罗猫小豆泥-投币":"https://i0.hdslb.com/bfs/emote/77b10ddaf24b4547e712ba8ae8f8e51ca8c38bb1.png","暹罗猫小豆泥-苦鲁西":"https://i0.hdslb.com/bfs/emote/ad3b14a2a5cf6680468222581a9964577eaca3d3.png","暹罗猫小豆泥-再见":"https://i0.hdslb.com/bfs/emote/e4c72ecf403858750b881030d650769e79017561.png","暹罗猫小豆泥-震惊":"https://i0.hdslb.com/bfs/emote/7caf9631dfb93071a843e308e5382799494d3a71.png"},enableQQ:!1},{el:"#valine",path:window.location.pathname});new Valine(e),Fluid.utils.waitElementVisible("#valine .vcontent",()=>{var e="#valine .vcontent img:not(.vemoji)";Fluid.plugins.imageCaption(e),Fluid.plugins.fancyBox(e)})}))}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><button id="floating-toc-button" class="floating-toc-button"><i class="iconfont icon-list"></i></button><div id="floating-toc" class="floating-toc"><div class="floating-toc-header"><i class="iconfont icon-list"></i></div><div class="floating-toc-body"><ul class="floating-toc-list" id="floating-toc-list"></ul></div></div><script>document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("floating-toc-button"),e=document.getElementById("floating-toc"),n=document.getElementById("floating-toc-list"),o=!1,d=0,i=0;t.addEventListener("mousedown",(function(e){o=!0,d=e.clientX-t.offsetLeft,i=e.clientY-t.offsetTop})),document.addEventListener("mousemove",(function(e){o&&(t.style.left=e.clientX-d+"px",t.style.top=e.clientY-i+"px")})),document.addEventListener("mouseup",(function(){o=!1})),t.addEventListener("touchstart",(function(e){o=!0,d=e.touches[0].clientX-t.offsetLeft,i=e.touches[0].clientY-t.offsetTop})),document.addEventListener("touchmove",(function(e){o&&(t.style.left=e.touches[0].clientX-d+"px",t.style.top=e.touches[0].clientY-i+"px")})),document.addEventListener("touchend",(function(){o=!1})),t.addEventListener("click",(function(){e.classList.toggle("active")})),document.querySelectorAll(".markdown-body h1, .markdown-body h2, .markdown-body h3, .markdown-body h4, .markdown-body h5, .markdown-body h6").forEach((function(t){var o=parseInt(t.tagName.charAt(1)),d=document.createElement("li"),i=document.createElement("a");i.classList.add("floating-toc-link"),i.textContent=t.textContent,i.setAttribute("href","#"+t.getAttribute("id")),d.classList.add("floating-toc-list-item"),d.classList.add("level-"+o),d.appendChild(i),n.appendChild(d),i.addEventListener("click",(function(n){n.preventDefault();var o=t.getAttribute("id"),d=document.getElementById(o),i=document.getElementsByClassName("header-inner")[0];if(d&&i){var c=window.pageYOffset,a=d.offsetTop+i.offsetHeight-c,s=null;window.requestAnimationFrame((function t(e){s||(s=e);var n,o=e-s,d=Math.min(o/1e3,1),i=(n=d)<.5?2*n*n:(4-2*n)*n-1;window.scrollTo(0,c+a*i),o<1e3&&window.requestAnimationFrame(t)}))}e.classList.remove("active")}))}))}))</script><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">Search</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">Keyword</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="statistics"><span id="leancloud-site-pv-container" style="display:none"><i class="iconfont iconPV"></i> <span id="leancloud-site-pv"></span> </span><span id="leancloud-site-uv-container" style="display:none"><i class="iconfont iconUV"></i> <span id="leancloud-site-uv"></span></span></div><div class="beian"><span><i class="iconfont iconICP-13"></i> <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">鄂 ICP 备 20000502 号</a></span></div><div class="footer-content"><a href="https://www.aimtao.net/categories/Mark/" rel="nofollow noopener"><span id="aimtao">© 2025 AimTao </span></a><i class="iconfont icon-love"></i> <span id="timeDate">loading...</span> <span id="times">loading...</span><script>var now=new Date;function createtime(){var n=new Date("11/28/2018 15:28:05");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="&nbsp"+dnum+"&nbsp天",document.getElementById("times").innerHTML=hnum+"&nbsp小时&nbsp"+mnum+"&nbsp分&nbsp"+snum+"&nbsp秒"}setInterval("createtime()",250)</script></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script defer>if(!Fluid.ctx.dnt){var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?07fe5d228ae82eadee00480515f9d64b";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()}</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var o=jQuery("#board-ctn").offset().top;window.tocbot.init({tocSelector:"#toc-body",contentSelector:".markdown-body",headingSelector:CONFIG.toc.headingSelector||"h1,h2,h3,h4,h5,h6",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",collapseDepth:CONFIG.toc.collapseDepth||0,scrollSmooth:!0,headingsOffset:-o}),t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))</script><script>!function(){var e=CONFIG.code_language.enable&&CONFIG.code_language.default,a=CONFIG.copy_btn;if(e||a){var i="";i+='<div class="code-widget">',i+="LANG",i+="</div>",jQuery(".markdown-body pre").each((function(){var n=jQuery(this);if(!(n.find("code.mermaid").length>0||n.find("span.line").length>0)){var t,c="";e&&(c=CONFIG.code_language.default,n[0].children.length>0&&n[0].children[0].classList.length>=2&&n.children().hasClass("hljs")?c=n[0].children[0].classList[1]:n[0].getAttribute("data-language")?c=n[0].getAttribute("data-language"):n.parent().hasClass("sourceCode")&&n[0].children.length>0&&n[0].children[0].classList.length>=2?(c=n[0].children[0].classList[1],n.parent().addClass("code-wrapper")):n.parent().hasClass("markdown-body")&&0===n[0].classList.length&&n.wrap('<div class="code-wrapper"></div>'),c=c.toUpperCase().replace("NONE",CONFIG.code_language.default)),n.append(i.replace("LANG",c).replace('code-widget">',(t=n[0],(Fluid.utils.getBackgroundLightness(t)>=0?"code-widget-light":"code-widget-dark")+(a?' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>':' code-widget">')))),a&&Fluid.utils.createScript("https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js",(function(){new window.ClipboardJS(".copy-btn",{target:function(e){for(var a=e.parentNode.childNodes,i=0;i<a.length;i++)if("CODE"===a[i].tagName)return a[i]}}).on("success",(function(e){e.clearSelection(),e.trigger.innerHTML=e.trigger.innerHTML.replace("icon-copy","icon-success"),setTimeout((function(){e.trigger.innerHTML=e.trigger.innerHTML.replace("icon-success","icon-copy")}),2e3)}))}))}}))}}()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var o=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),n=[];for(var i of o)n.push(".markdown-body > "+i.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(n.join(", "))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script defer src="/js/leancloud.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">Blog works best with JavaScript enabled</div></noscript></body></html>